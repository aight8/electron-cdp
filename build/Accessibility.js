"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const EventEmitter = require("events");
const DebuggerError_1 = require("./DebuggerError");
/**
 * No description
 * @experimental
 */
class Accessibility {
    constructor(dbg /* Electron.Debugger*/) {
        this.dbg = dbg; /* Electron.Debugger*/
        this.events = new EventEmitter();
        if (!this.dbg.isAttached()) {
            throw new Error(`Cannot create Accessibility Domain Class because the debugger is not attached.`);
        }
    }
    on(event, listener) {
        this.events.on(event, listener);
    }
    once(event, listener) {
        this.events.on(event, listener);
    }
    assertError(error, commandName) {
        if ('message' in error && 'code' in error) {
            throw new DebuggerError_1.default(error.message, error.code, commandName);
        }
    }
    /**
     * Fetches the accessibility node and partial accessibility tree for this DOM node, if it exists.
     * @experimental
     */
    async getPartialAXTree(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Accessibility.getPartialAXTree', params, (error, result) => {
                this.assertError(error, 'Accessibility.getPartialAXTree');
                resolve(result);
            });
        });
    }
}
exports.default = Accessibility;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWNjZXNzaWJpbGl0eS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL2dlbmVyYXRlZC10cy9BY2Nlc3NpYmlsaXR5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsdUNBQXNDO0FBQ3RDLG1EQUEyQztBQTZRM0M7OztHQUdHO0FBQ0g7SUFHSSxZQUE2QixHQUFRLENBQUMsc0JBQXNCO1FBQS9CLFFBQUcsR0FBSCxHQUFHLENBQUssQ0FBQyxzQkFBc0I7UUFGcEQsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUE7UUFJL0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN6QixNQUFNLElBQUksS0FBSyxDQUFDLGdGQUFnRixDQUFDLENBQUE7UUFDckcsQ0FBQztJQUNMLENBQUM7SUFFTSxFQUFFLENBQUMsS0FBYSxFQUFFLFFBQWtCO1FBQ3ZDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQTtJQUNuQyxDQUFDO0lBRU0sSUFBSSxDQUFDLEtBQWEsRUFBRSxRQUFrQjtRQUN6QyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVPLFdBQVcsQ0FBQyxLQUFVLEVBQUUsV0FBbUI7UUFDL0MsRUFBRSxDQUFDLENBQUMsU0FBUyxJQUFJLEtBQUssSUFBSSxNQUFNLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQztZQUN4QyxNQUFNLElBQUksdUJBQWEsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFDLENBQUE7UUFDbkUsQ0FBQztJQUNMLENBQUM7SUFFRDs7O09BR0c7SUFDSSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsTUFBNkM7UUFDdkUsTUFBTSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQXdDLENBQUMsT0FBTyxFQUFFLE1BQU07WUFDNUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsZ0NBQWdDLEVBQUUsTUFBTSxFQUFFLENBQUMsS0FBVSxFQUFFLE1BQVc7Z0JBQ25GLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLGdDQUFnQyxDQUFDLENBQUE7Z0JBQ3pELE9BQU8sQ0FBQyxNQUErQyxDQUFDLENBQUE7WUFDNUQsQ0FBQyxDQUFDLENBQUE7UUFDTixDQUFDLENBQUMsQ0FBQTtJQUNOLENBQUM7Q0FFSjtBQUVELGtCQUFlLGFBQWEsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEV2ZW50RW1pdHRlciBmcm9tICdldmVudHMnXG5pbXBvcnQgRGVidWdnZXJFcnJvciBmcm9tICcuL0RlYnVnZ2VyRXJyb3InXG5pbXBvcnQgRE9NIGZyb20gJy4vRE9NJ1xuXG5tb2R1bGUgQWNjZXNzaWJpbGl0eSB7XG4gICAgLyoqKioqKioqKioqKioqKlxuICAgICAqKioqIFR5cGVzICoqKipcbiAgICAgKioqKioqKioqKioqKiovXG5cbiAgICAvKipcbiAgICAgKiBVbmlxdWUgYWNjZXNzaWJpbGl0eSBub2RlIGlkZW50aWZpZXIuXG4gICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAqL1xuICAgIGV4cG9ydCB0eXBlIEFYTm9kZUlkID0gc3RyaW5nXG5cbiAgICAvKipcbiAgICAgKiBFbnVtIG9mIHBvc3NpYmxlIHByb3BlcnR5IHR5cGVzLlxuICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBBWFZhbHVlVHlwZSA9ICdib29sZWFuJyB8ICd0cmlzdGF0ZScgfCAnYm9vbGVhbk9yVW5kZWZpbmVkJyB8ICdpZHJlZicgfCAnaWRyZWZMaXN0JyB8ICdpbnRlZ2VyJyB8ICdub2RlJyB8ICdub2RlTGlzdCcgfCAnbnVtYmVyJyB8ICdzdHJpbmcnIHxcbiAgICAgICAgJ2NvbXB1dGVkU3RyaW5nJyB8ICd0b2tlbicgfCAndG9rZW5MaXN0JyB8ICdkb21SZWxhdGlvbicgfCAncm9sZScgfCAnaW50ZXJuYWxSb2xlJyB8ICd2YWx1ZVVuZGVmaW5lZCdcblxuICAgIC8qKlxuICAgICAqIEVudW0gb2YgcG9zc2libGUgcHJvcGVydHkgc291cmNlcy5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgQVhWYWx1ZVNvdXJjZVR5cGUgPSAnYXR0cmlidXRlJyB8ICdpbXBsaWNpdCcgfCAnc3R5bGUnIHwgJ2NvbnRlbnRzJyB8ICdwbGFjZWhvbGRlcicgfCAncmVsYXRlZEVsZW1lbnQnXG5cbiAgICAvKipcbiAgICAgKiBFbnVtIG9mIHBvc3NpYmxlIG5hdGl2ZSBwcm9wZXJ0eSBzb3VyY2VzIChhcyBhIHN1YnR5cGUgb2YgYSBwYXJ0aWN1bGFyIEFYVmFsdWVTb3VyY2VUeXBlKS5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgQVhWYWx1ZU5hdGl2ZVNvdXJjZVR5cGUgPSAnZmlnY2FwdGlvbicgfCAnbGFiZWwnIHwgJ2xhYmVsZm9yJyB8ICdsYWJlbHdyYXBwZWQnIHwgJ2xlZ2VuZCcgfCAndGFibGVjYXB0aW9uJyB8ICd0aXRsZScgfCAnb3RoZXInXG5cbiAgICAvKipcbiAgICAgKiBBIHNpbmdsZSBzb3VyY2UgZm9yIGEgY29tcHV0ZWQgQVggcHJvcGVydHkuXG4gICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAqL1xuICAgIGV4cG9ydCB0eXBlIEFYVmFsdWVTb3VyY2UgPSB7XG4gICAgICAgIC8qKiBXaGF0IHR5cGUgb2Ygc291cmNlIHRoaXMgaXMuICovXG4gICAgICAgIHR5cGU6IEFYVmFsdWVTb3VyY2VUeXBlXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IHNvdXJjZS5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICB2YWx1ZT86IEFYVmFsdWVcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhlIHJlbGV2YW50IGF0dHJpYnV0ZSwgaWYgYW55LlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIGF0dHJpYnV0ZT86IHN0cmluZ1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdmFsdWUgb2YgdGhlIHJlbGV2YW50IGF0dHJpYnV0ZSwgaWYgYW55LlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIGF0dHJpYnV0ZVZhbHVlPzogQVhWYWx1ZVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoaXMgc291cmNlIGlzIHN1cGVyc2VkZWQgYnkgYSBoaWdoZXIgcHJpb3JpdHkgc291cmNlLlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIHN1cGVyc2VkZWQ/OiBib29sZWFuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYXRpdmUgbWFya3VwIHNvdXJjZSBmb3IgdGhpcyB2YWx1ZSwgZS5nLiBhIDxsYWJlbD4gZWxlbWVudC5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBuYXRpdmVTb3VyY2U/OiBBWFZhbHVlTmF0aXZlU291cmNlVHlwZVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdmFsdWUsIHN1Y2ggYXMgYSBub2RlIG9yIG5vZGUgbGlzdCwgb2YgdGhlIG5hdGl2ZSBzb3VyY2UuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgbmF0aXZlU291cmNlVmFsdWU/OiBBWFZhbHVlXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIHZhbHVlIGZvciB0aGlzIHByb3BlcnR5IGlzIGludmFsaWQuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgaW52YWxpZD86IGJvb2xlYW5cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVhc29uIGZvciB0aGUgdmFsdWUgYmVpbmcgaW52YWxpZCwgaWYgaXQgaXMuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgaW52YWxpZFJlYXNvbj86IHN0cmluZ1xuICAgIH1cblxuICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgZXhwb3J0IHR5cGUgQVhSZWxhdGVkTm9kZSA9IHtcbiAgICAgICAgLyoqIFRoZSBCYWNrZW5kTm9kZUlkIG9mIHRoZSByZWxhdGVkIERPTSBub2RlLiAqL1xuICAgICAgICBiYWNrZW5kRE9NTm9kZUlkOiBET00uQmFja2VuZE5vZGVJZFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgSURSZWYgdmFsdWUgcHJvdmlkZWQsIGlmIGFueS5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBpZHJlZj86IHN0cmluZ1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGV4dCBhbHRlcm5hdGl2ZSBvZiB0aGlzIG5vZGUgaW4gdGhlIGN1cnJlbnQgY29udGV4dC5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICB0ZXh0Pzogc3RyaW5nXG4gICAgfVxuXG4gICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICBleHBvcnQgdHlwZSBBWFByb3BlcnR5ID0ge1xuICAgICAgICAvKiogVGhlIG5hbWUgb2YgdGhpcyBwcm9wZXJ0eS4gKi9cbiAgICAgICAgbmFtZTogc3RyaW5nXG5cbiAgICAgICAgLyoqIFRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5LiAqL1xuICAgICAgICB2YWx1ZTogQVhWYWx1ZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc2luZ2xlIGNvbXB1dGVkIEFYIHByb3BlcnR5LlxuICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBBWFZhbHVlID0ge1xuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyB2YWx1ZS4gKi9cbiAgICAgICAgdHlwZTogQVhWYWx1ZVR5cGVcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvbXB1dGVkIHZhbHVlIG9mIHRoaXMgcHJvcGVydHkuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgdmFsdWU/OiBhbnlcblxuICAgICAgICAvKipcbiAgICAgICAgICogT25lIG9yIG1vcmUgcmVsYXRlZCBub2RlcywgaWYgYXBwbGljYWJsZS5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICByZWxhdGVkTm9kZXM/OiBBWFJlbGF0ZWROb2RlW11cblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNvdXJjZXMgd2hpY2ggY29udHJpYnV0ZWQgdG8gdGhlIGNvbXB1dGF0aW9uIG9mIHRoaXMgcHJvcGVydHkuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgc291cmNlcz86IEFYVmFsdWVTb3VyY2VbXVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YXRlcyB3aGljaCBhcHBseSB0byBldmVyeSBBWCBub2RlLlxuICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBBWEdsb2JhbFN0YXRlcyA9ICdkaXNhYmxlZCcgfCAnaGlkZGVuJyB8ICdoaWRkZW5Sb290JyB8ICdpbnZhbGlkJyB8ICdrZXlzaG9ydGN1dHMnIHwgJ3JvbGVkZXNjcmlwdGlvbidcblxuICAgIC8qKlxuICAgICAqIEF0dHJpYnV0ZXMgd2hpY2ggYXBwbHkgdG8gbm9kZXMgaW4gbGl2ZSByZWdpb25zLlxuICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBBWExpdmVSZWdpb25BdHRyaWJ1dGVzID0gJ2xpdmUnIHwgJ2F0b21pYycgfCAncmVsZXZhbnQnIHwgJ2J1c3knIHwgJ3Jvb3QnXG5cbiAgICAvKipcbiAgICAgKiBBdHRyaWJ1dGVzIHdoaWNoIGFwcGx5IHRvIHdpZGdldHMuXG4gICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAqL1xuICAgIGV4cG9ydCB0eXBlIEFYV2lkZ2V0QXR0cmlidXRlcyA9ICdhdXRvY29tcGxldGUnIHwgJ2hhc3BvcHVwJyB8ICdsZXZlbCcgfCAnbXVsdGlzZWxlY3RhYmxlJyB8ICdvcmllbnRhdGlvbicgfCAnbXVsdGlsaW5lJyB8ICdyZWFkb25seScgfCAncmVxdWlyZWQnIHxcbiAgICAgICAgJ3ZhbHVlbWluJyB8ICd2YWx1ZW1heCcgfCAndmFsdWV0ZXh0J1xuXG4gICAgLyoqXG4gICAgICogU3RhdGVzIHdoaWNoIGFwcGx5IHRvIHdpZGdldHMuXG4gICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAqL1xuICAgIGV4cG9ydCB0eXBlIEFYV2lkZ2V0U3RhdGVzID0gJ2NoZWNrZWQnIHwgJ2V4cGFuZGVkJyB8ICdtb2RhbCcgfCAncHJlc3NlZCcgfCAnc2VsZWN0ZWQnXG5cbiAgICAvKipcbiAgICAgKiBSZWxhdGlvbnNoaXBzIGJldHdlZW4gZWxlbWVudHMgb3RoZXIgdGhhbiBwYXJlbnQvY2hpbGQvc2libGluZy5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgQVhSZWxhdGlvbnNoaXBBdHRyaWJ1dGVzID0gJ2FjdGl2ZWRlc2NlbmRhbnQnIHwgJ2NvbnRyb2xzJyB8ICdkZXNjcmliZWRieScgfCAnZGV0YWlscycgfCAnZXJyb3JtZXNzYWdlJyB8ICdmbG93dG8nIHwgJ2xhYmVsbGVkYnknIHwgJ293bnMnXG5cbiAgICAvKipcbiAgICAgKiBBIG5vZGUgaW4gdGhlIGFjY2Vzc2liaWxpdHkgdHJlZS5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgQVhOb2RlID0ge1xuICAgICAgICAvKiogVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgbm9kZS4gKi9cbiAgICAgICAgbm9kZUlkOiBBWE5vZGVJZFxuXG4gICAgICAgIC8qKiBXaGV0aGVyIHRoaXMgbm9kZSBpcyBpZ25vcmVkIGZvciBhY2Nlc3NpYmlsaXR5ICovXG4gICAgICAgIGlnbm9yZWQ6IGJvb2xlYW5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29sbGVjdGlvbiBvZiByZWFzb25zIHdoeSB0aGlzIG5vZGUgaXMgaGlkZGVuLlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIGlnbm9yZWRSZWFzb25zPzogQVhQcm9wZXJ0eVtdXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgPGNvZGU+Tm9kZTwvY29kZT4ncyByb2xlLCB3aGV0aGVyIGV4cGxpY2l0IG9yIGltcGxpY2l0LlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIHJvbGU/OiBBWFZhbHVlXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhY2Nlc3NpYmxlIG5hbWUgZm9yIHRoaXMgPGNvZGU+Tm9kZTwvY29kZT4uXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgbmFtZT86IEFYVmFsdWVcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFjY2Vzc2libGUgZGVzY3JpcHRpb24gZm9yIHRoaXMgPGNvZGU+Tm9kZTwvY29kZT4uXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgZGVzY3JpcHRpb24/OiBBWFZhbHVlXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB2YWx1ZSBmb3IgdGhpcyA8Y29kZT5Ob2RlPC9jb2RlPi5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICB2YWx1ZT86IEFYVmFsdWVcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWxsIG90aGVyIHByb3BlcnRpZXNcbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm9wZXJ0aWVzPzogQVhQcm9wZXJ0eVtdXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElEcyBmb3IgZWFjaCBvZiB0aGlzIG5vZGUncyBjaGlsZCBub2Rlcy5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBjaGlsZElkcz86IEFYTm9kZUlkW11cblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJhY2tlbmQgSUQgZm9yIHRoZSBhc3NvY2lhdGVkIERPTSBub2RlLCBpZiBhbnkuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgYmFja2VuZERPTU5vZGVJZD86IERPTS5CYWNrZW5kTm9kZUlkXG4gICAgfVxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKiBDb21tYW5kIFBhcmFtZXRlcnMgKioqKlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgZXhwb3J0IG1vZHVsZSBQYXJhbXMge1xuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSBnZXRQYXJ0aWFsQVhUcmVlID0ge1xuICAgICAgICAgICAgLyoqIElEIG9mIG5vZGUgdG8gZ2V0IHRoZSBwYXJ0aWFsIGFjY2Vzc2liaWxpdHkgdHJlZSBmb3IuICovXG4gICAgICAgICAgICBub2RlSWQ6IERPTS5Ob2RlSWRcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBXaGV0aGVyIHRvIGZldGNoIHRoaXMgbm9kZXMgYW5jZXN0b3JzLCBzaWJsaW5ncyBhbmQgY2hpbGRyZW4uIERlZmF1bHRzIHRvIHRydWUuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZmV0Y2hSZWxhdGl2ZXM/OiBib29sZWFuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICoqKiogQ29tbWFuZCBSZXN1bHQgKioqKlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICBleHBvcnQgbW9kdWxlIFJlc3VsdCB7XG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIGdldFBhcnRpYWxBWFRyZWUgPSB7XG4gICAgICAgICAgICAvKiogVGhlIDxjb2RlPkFjY2Vzc2liaWxpdHkuQVhOb2RlPC9jb2RlPiBmb3IgdGhpcyBET00gbm9kZSwgaWYgaXQgZXhpc3RzLCBwbHVzIGl0cyBhbmNlc3RvcnMsIHNpYmxpbmdzIGFuZCBjaGlsZHJlbiwgaWYgcmVxdWVzdGVkLiAqL1xuICAgICAgICAgICAgbm9kZXM6IEFYTm9kZVtdXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKiBFdmVudCBQYXJhbWV0ZXJzICoqKipcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxufVxuXG4vKipcbiAqIE5vIGRlc2NyaXB0aW9uXG4gKiBAZXhwZXJpbWVudGFsXG4gKi9cbmNsYXNzIEFjY2Vzc2liaWxpdHkge1xuICAgIHByaXZhdGUgZXZlbnRzID0gbmV3IEV2ZW50RW1pdHRlcigpXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGRiZzogYW55IC8qIEVsZWN0cm9uLkRlYnVnZ2VyKi8gKSB7XG5cbiAgICAgICAgaWYgKCF0aGlzLmRiZy5pc0F0dGFjaGVkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNyZWF0ZSBBY2Nlc3NpYmlsaXR5IERvbWFpbiBDbGFzcyBiZWNhdXNlIHRoZSBkZWJ1Z2dlciBpcyBub3QgYXR0YWNoZWQuYClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBvbihldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogRnVuY3Rpb24pIHtcbiAgICAgICAgdGhpcy5ldmVudHMub24oZXZlbnQsIGxpc3RlbmVyKVxuICAgIH1cblxuICAgIHB1YmxpYyBvbmNlKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbikge1xuICAgICAgICB0aGlzLmV2ZW50cy5vbihldmVudCwgbGlzdGVuZXIpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3NlcnRFcnJvcihlcnJvcjogYW55LCBjb21tYW5kTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICgnbWVzc2FnZScgaW4gZXJyb3IgJiYgJ2NvZGUnIGluIGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRGVidWdnZXJFcnJvcihlcnJvci5tZXNzYWdlLCBlcnJvci5jb2RlLCBjb21tYW5kTmFtZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGFjY2Vzc2liaWxpdHkgbm9kZSBhbmQgcGFydGlhbCBhY2Nlc3NpYmlsaXR5IHRyZWUgZm9yIHRoaXMgRE9NIG5vZGUsIGlmIGl0IGV4aXN0cy5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIGdldFBhcnRpYWxBWFRyZWUocGFyYW1zOiBBY2Nlc3NpYmlsaXR5LlBhcmFtcy5nZXRQYXJ0aWFsQVhUcmVlKTogUHJvbWlzZTxBY2Nlc3NpYmlsaXR5LlJlc3VsdC5nZXRQYXJ0aWFsQVhUcmVlPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPEFjY2Vzc2liaWxpdHkuUmVzdWx0LmdldFBhcnRpYWxBWFRyZWU+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdBY2Nlc3NpYmlsaXR5LmdldFBhcnRpYWxBWFRyZWUnLCBwYXJhbXMsIChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0RXJyb3IoZXJyb3IsICdBY2Nlc3NpYmlsaXR5LmdldFBhcnRpYWxBWFRyZWUnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0IGFzIEFjY2Vzc2liaWxpdHkuUmVzdWx0LmdldFBhcnRpYWxBWFRyZWUpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBBY2Nlc3NpYmlsaXR5Il19