"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const EventEmitter = require("events");
const DebuggerError_1 = require("./DebuggerError");
/**
 * This domain provides various functionality related to drawing atop the inspected page.
 * @experimental
 */
class Overlay {
    constructor(dbg /* Electron.Debugger*/) {
        this.dbg = dbg; /* Electron.Debugger*/
        this.events = new EventEmitter();
        this.dbg.on('message', (event, method, params) => {
            const [domain, domainMethod] = method.split('.');
            this.events.emit(domainMethod, params);
        });
        if (!this.dbg.isAttached()) {
            throw new Error(`Cannot create Overlay Domain Class because the debugger is not attached.`);
        }
    }
    on(event, listener) {
        this.events.on(event, listener);
    }
    once(event, listener) {
        this.events.on(event, listener);
    }
    assertError(error, commandName) {
        if ('message' in error && 'code' in error) {
            throw new DebuggerError_1.default(error.message, error.code, commandName);
        }
    }
    /** Enables domain notifications. */
    async enable() {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.enable', {}, (error, result) => {
                this.assertError(error, 'Overlay.enable');
                resolve();
            });
        });
    }
    /** Disables domain notifications. */
    async disable() {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.disable', {}, (error, result) => {
                this.assertError(error, 'Overlay.disable');
                resolve();
            });
        });
    }
    /** Requests that backend shows paint rectangles */
    async setShowPaintRects(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.setShowPaintRects', params, (error, result) => {
                this.assertError(error, 'Overlay.setShowPaintRects');
                resolve();
            });
        });
    }
    /** Requests that backend shows debug borders on layers */
    async setShowDebugBorders(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.setShowDebugBorders', params, (error, result) => {
                this.assertError(error, 'Overlay.setShowDebugBorders');
                resolve();
            });
        });
    }
    /** Requests that backend shows the FPS counter */
    async setShowFPSCounter(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.setShowFPSCounter', params, (error, result) => {
                this.assertError(error, 'Overlay.setShowFPSCounter');
                resolve();
            });
        });
    }
    /** Requests that backend shows scroll bottleneck rects */
    async setShowScrollBottleneckRects(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.setShowScrollBottleneckRects', params, (error, result) => {
                this.assertError(error, 'Overlay.setShowScrollBottleneckRects');
                resolve();
            });
        });
    }
    /** Paints viewport size upon main frame resize. */
    async setShowViewportSizeOnResize(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.setShowViewportSizeOnResize', params, (error, result) => {
                this.assertError(error, 'Overlay.setShowViewportSizeOnResize');
                resolve();
            });
        });
    }
    /** No description */
    async setPausedInDebuggerMessage(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.setPausedInDebuggerMessage', params || {}, (error, result) => {
                this.assertError(error, 'Overlay.setPausedInDebuggerMessage');
                resolve();
            });
        });
    }
    /** No description */
    async setSuspended(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.setSuspended', params, (error, result) => {
                this.assertError(error, 'Overlay.setSuspended');
                resolve();
            });
        });
    }
    /** Enters the 'inspect' mode. In this mode, elements that user is hovering over are highlighted. Backend then generates 'inspectNodeRequested' event upon element selection. */
    async setInspectMode(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.setInspectMode', params, (error, result) => {
                this.assertError(error, 'Overlay.setInspectMode');
                resolve();
            });
        });
    }
    /** Highlights given rectangle. Coordinates are absolute with respect to the main frame viewport. */
    async highlightRect(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.highlightRect', params, (error, result) => {
                this.assertError(error, 'Overlay.highlightRect');
                resolve();
            });
        });
    }
    /** Highlights given quad. Coordinates are absolute with respect to the main frame viewport. */
    async highlightQuad(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.highlightQuad', params, (error, result) => {
                this.assertError(error, 'Overlay.highlightQuad');
                resolve();
            });
        });
    }
    /** Highlights DOM node with given id or with the given JavaScript object wrapper. Either nodeId or objectId must be specified. */
    async highlightNode(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.highlightNode', params, (error, result) => {
                this.assertError(error, 'Overlay.highlightNode');
                resolve();
            });
        });
    }
    /** Highlights owner element of the frame with given id. */
    async highlightFrame(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.highlightFrame', params, (error, result) => {
                this.assertError(error, 'Overlay.highlightFrame');
                resolve();
            });
        });
    }
    /** Hides any highlight. */
    async hideHighlight() {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.hideHighlight', {}, (error, result) => {
                this.assertError(error, 'Overlay.hideHighlight');
                resolve();
            });
        });
    }
    /** For testing. */
    async getHighlightObjectForTest(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Overlay.getHighlightObjectForTest', params, (error, result) => {
                this.assertError(error, 'Overlay.getHighlightObjectForTest');
                resolve(result);
            });
        });
    }
}
exports.default = Overlay;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT3ZlcmxheS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL2dlbmVyYXRlZC10cy9PdmVybGF5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsdUNBQXNDO0FBQ3RDLG1EQUEyQztBQXVTM0M7OztHQUdHO0FBQ0g7SUFHSSxZQUE2QixHQUFRLENBQUMsc0JBQXNCO1FBQS9CLFFBQUcsR0FBSCxHQUFHLENBQUssQ0FBQyxzQkFBc0I7UUFGcEQsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUE7UUFJL0IsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsS0FBVSxFQUFFLE1BQVcsRUFBRSxNQUFXO1lBQ3hELE1BQU0sQ0FBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQTtZQUNoRCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDMUMsQ0FBQyxDQUFDLENBQUE7UUFFRixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sSUFBSSxLQUFLLENBQUMsMEVBQTBFLENBQUMsQ0FBQTtRQUMvRixDQUFDO0lBQ0wsQ0FBQztJQUVNLEVBQUUsQ0FBQyxLQUFhLEVBQUUsUUFBa0I7UUFDdkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFTSxJQUFJLENBQUMsS0FBYSxFQUFFLFFBQWtCO1FBQ3pDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQTtJQUNuQyxDQUFDO0lBRU8sV0FBVyxDQUFDLEtBQVUsRUFBRSxXQUFtQjtRQUMvQyxFQUFFLENBQUMsQ0FBQyxTQUFTLElBQUksS0FB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QUcsQ0FBQyxXQUFXLENBQUMsdUJBQXVCLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBVSxFQUFFLE1BQVc7Z0JBQ3RFLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLHVCQUF1QixDQUFDLENBQUE7Z0JBQ2hELE9BQU8sRUFBRSxDQUFBO1lBQ2IsQ0FBQyxDQUFDLENBQUE7UUFDTixDQUFDLENBQUMsQ0FBQTtJQUNOLENBQUM7SUFFRCxtQkFBbUI7SUFDWixLQUFLLENBQUMseUJBQXlCLENBQUMsTUFBZ0Q7UUFDbkYsTUFBTSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQTJDLENBQUMsT0FBTyxFQUFFLE1BQU07WUFDL0UsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsbUNBQW1DLEVBQUUsTUFBTSxFQUFFLENBQUMsS0FBVSxFQUFFLE1BQVc7Z0JBQ3RGLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLG1DQUFtQyxDQUFDLENBQUE7Z0JBQzVELE9BQU8sQ0FBQyxNQUFrRCxDQUFDLENBQUE7WUFDL0QsQ0FBQyxDQUFDLENBQUE7UUFDTixDQUFDLENBQUMsQ0FBQTtJQUNOLENBQUM7Q0FFSjtBQUVELGtCQUFlLE9BQU8sQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEV2ZW50RW1pdHRlciBmcm9tICdldmVudHMnXG5pbXBvcnQgRGVidWdnZXJFcnJvciBmcm9tICcuL0RlYnVnZ2VyRXJyb3InXG5pbXBvcnQgRE9NIGZyb20gJy4vRE9NJ1xuaW1wb3J0IFBhZ2UgZnJvbSAnLi9QYWdlJ1xuaW1wb3J0IFJ1bnRpbWUgZnJvbSAnLi9SdW50aW1lJ1xuXG5kZWNsYXJlIGludGVyZmFjZSBPdmVybGF5IHtcblxuICAgIC8qKiBGaXJlZCB3aGVuIHRoZSBub2RlIHNob3VsZCBiZSBoaWdobGlnaHRlZC4gVGhpcyBoYXBwZW5zIGFmdGVyIGNhbGwgdG8gPGNvZGU+c2V0SW5zcGVjdE1vZGU8L2NvZGU+LiAqL1xuICAgIG9uKGV2ZW50OiAnbm9kZUhpZ2hsaWdodFJlcXVlc3RlZCcsIGxpc3RlbmVyOiAocGFyYW1zOiBPdmVybGF5LkV2ZW50UGFyYW1zLm5vZGVIaWdobGlnaHRSZXF1ZXN0ZWQpID0+IHZvaWQpOiB2b2lkXG4gICAgLyoqIEZpcmVkIHdoZW4gdGhlIG5vZGUgc2hvdWxkIGJlIGhpZ2hsaWdodGVkLiBUaGlzIGhhcHBlbnMgYWZ0ZXIgY2FsbCB0byA8Y29kZT5zZXRJbnNwZWN0TW9kZTwvY29kZT4uICovXG4gICAgb25jZShldmVudDogJ25vZGVIaWdobGlnaHRSZXF1ZXN0ZWQnLCBsaXN0ZW5lcjogKHBhcmFtczogT3ZlcmxheS5FdmVudFBhcmFtcy5ub2RlSGlnaGxpZ2h0UmVxdWVzdGVkKSA9PiB2b2lkKTogdm9pZFxuXG4gICAgLyoqIEZpcmVkIHdoZW4gdGhlIG5vZGUgc2hvdWxkIGJlIGluc3BlY3RlZC4gVGhpcyBoYXBwZW5zIGFmdGVyIGNhbGwgdG8gPGNvZGU+c2V0SW5zcGVjdE1vZGU8L2NvZGU+IG9yIHdoZW4gdXNlciBtYW51YWxseSBpbnNwZWN0cyBhbiBlbGVtZW50LiAqL1xuICAgIG9uKGV2ZW50OiAnaW5zcGVjdE5vZGVSZXF1ZXN0ZWQnLCBsaXN0ZW5lcjogKHBhcmFtczogT3ZlcmxheS5FdmVudFBhcmFtcy5pbnNwZWN0Tm9kZVJlcXVlc3RlZCkgPT4gdm9pZCk6IHZvaWRcbiAgICAvKiogRmlyZWQgd2hlbiB0aGUgbm9kZSBzaG91bGQgYmUgaW5zcGVjdGVkLiBUaGlzIGhhcHBlbnMgYWZ0ZXIgY2FsbCB0byA8Y29kZT5zZXRJbnNwZWN0TW9kZTwvY29kZT4gb3Igd2hlbiB1c2VyIG1hbnVhbGx5IGluc3BlY3RzIGFuIGVsZW1lbnQuICovXG4gICAgb25jZShldmVudDogJ2luc3BlY3ROb2RlUmVxdWVzdGVkJywgbGlzdGVuZXI6IChwYXJhbXM6IE92ZXJsYXkuRXZlbnRQYXJhbXMuaW5zcGVjdE5vZGVSZXF1ZXN0ZWQpID0+IHZvaWQpOiB2b2lkXG5cbn1cblxubW9kdWxlIE92ZXJsYXkge1xuICAgIC8qKioqKioqKioqKioqKipcbiAgICAgKioqKiBUeXBlcyAqKioqXG4gICAgICoqKioqKioqKioqKioqL1xuXG4gICAgLyoqXG4gICAgICogQ29uZmlndXJhdGlvbiBkYXRhIGZvciB0aGUgaGlnaGxpZ2h0aW5nIG9mIHBhZ2UgZWxlbWVudHMuXG4gICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAqL1xuICAgIGV4cG9ydCB0eXBlIEhpZ2hsaWdodENvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIG5vZGUgaW5mbyB0b29sdGlwIHNob3VsZCBiZSBzaG93biAoZGVmYXVsdDogZmFsc2UpLlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIHNob3dJbmZvPzogYm9vbGVhblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBydWxlcnMgc2hvdWxkIGJlIHNob3duIChkZWZhdWx0OiBmYWxzZSkuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgc2hvd1J1bGVycz86IGJvb2xlYW5cblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgZXh0ZW5zaW9uIGxpbmVzIGZyb20gbm9kZSB0byB0aGUgcnVsZXJzIHNob3VsZCBiZSBzaG93biAoZGVmYXVsdDogZmFsc2UpLlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIHNob3dFeHRlbnNpb25MaW5lcz86IGJvb2xlYW5cblxuICAgICAgICAvKipcbiAgICAgICAgICogTm8gZGVzY3JpcHRpb25cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBkaXNwbGF5QXNNYXRlcmlhbD86IGJvb2xlYW5cblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvbnRlbnQgYm94IGhpZ2hsaWdodCBmaWxsIGNvbG9yIChkZWZhdWx0OiB0cmFuc3BhcmVudCkuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgY29udGVudENvbG9yPzogRE9NLlJHQkFcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHBhZGRpbmcgaGlnaGxpZ2h0IGZpbGwgY29sb3IgKGRlZmF1bHQ6IHRyYW5zcGFyZW50KS5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBwYWRkaW5nQ29sb3I/OiBET00uUkdCQVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYm9yZGVyIGhpZ2hsaWdodCBmaWxsIGNvbG9yIChkZWZhdWx0OiB0cmFuc3BhcmVudCkuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgYm9yZGVyQ29sb3I/OiBET00uUkdCQVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWFyZ2luIGhpZ2hsaWdodCBmaWxsIGNvbG9yIChkZWZhdWx0OiB0cmFuc3BhcmVudCkuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgbWFyZ2luQ29sb3I/OiBET00uUkdCQVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZXZlbnQgdGFyZ2V0IGVsZW1lbnQgaGlnaGxpZ2h0IGZpbGwgY29sb3IgKGRlZmF1bHQ6IHRyYW5zcGFyZW50KS5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBldmVudFRhcmdldENvbG9yPzogRE9NLlJHQkFcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNoYXBlIG91dHNpZGUgZmlsbCBjb2xvciAoZGVmYXVsdDogdHJhbnNwYXJlbnQpLlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIHNoYXBlQ29sb3I/OiBET00uUkdCQVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2hhcGUgbWFyZ2luIGZpbGwgY29sb3IgKGRlZmF1bHQ6IHRyYW5zcGFyZW50KS5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBzaGFwZU1hcmdpbkNvbG9yPzogRE9NLlJHQkFcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2VsZWN0b3JzIHRvIGhpZ2hsaWdodCByZWxldmFudCBub2Rlcy5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBzZWxlY3Rvckxpc3Q/OiBzdHJpbmdcbiAgICB9XG5cbiAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgIGV4cG9ydCB0eXBlIEluc3BlY3RNb2RlID0gJ3NlYXJjaEZvck5vZGUnIHwgJ3NlYXJjaEZvclVBU2hhZG93RE9NJyB8ICdub25lJ1xuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKiBDb21tYW5kIFBhcmFtZXRlcnMgKioqKlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgZXhwb3J0IG1vZHVsZSBQYXJhbXMge1xuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSBzZXRTaG93UGFpbnRSZWN0cyA9IHtcbiAgICAgICAgICAgIC8qKiBUcnVlIGZvciBzaG93aW5nIHBhaW50IHJlY3RhbmdsZXMgKi9cbiAgICAgICAgICAgIHJlc3VsdDogYm9vbGVhblxuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgc2V0U2hvd0RlYnVnQm9yZGVycyA9IHtcbiAgICAgICAgICAgIC8qKiBUcnVlIGZvciBzaG93aW5nIGRlYnVnIGJvcmRlcnMgKi9cbiAgICAgICAgICAgIHNob3c6IGJvb2xlYW5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIHNldFNob3dGUFNDb3VudGVyID0ge1xuICAgICAgICAgICAgLyoqIFRydWUgZm9yIHNob3dpbmcgdGhlIEZQUyBjb3VudGVyICovXG4gICAgICAgICAgICBzaG93OiBib29sZWFuXG4gICAgICAgIH1cblxuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSBzZXRTaG93U2Nyb2xsQm90dGxlbmVja1JlY3RzID0ge1xuICAgICAgICAgICAgLyoqIFRydWUgZm9yIHNob3dpbmcgc2Nyb2xsIGJvdHRsZW5lY2sgcmVjdHMgKi9cbiAgICAgICAgICAgIHNob3c6IGJvb2xlYW5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIHNldFNob3dWaWV3cG9ydFNpemVPblJlc2l6ZSA9IHtcbiAgICAgICAgICAgIC8qKiBXaGV0aGVyIHRvIHBhaW50IHNpemUgb3Igbm90LiAqL1xuICAgICAgICAgICAgc2hvdzogYm9vbGVhblxuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgc2V0UGF1c2VkSW5EZWJ1Z2dlck1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBtZXNzYWdlIHRvIGRpc3BsYXksIGFsc28gdHJpZ2dlcnMgcmVzdW1lIGFuZCBzdGVwIG92ZXIgY29udHJvbHMuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbWVzc2FnZT86IHN0cmluZ1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgc2V0U3VzcGVuZGVkID0ge1xuICAgICAgICAgICAgLyoqIFdoZXRoZXIgb3ZlcmxheSBzaG91bGQgYmUgc3VzcGVuZGVkIGFuZCBub3QgY29uc3VtZSBhbnkgcmVzb3VyY2VzIHVudGlsIHJlc3VtZWQuICovXG4gICAgICAgICAgICBzdXNwZW5kZWQ6IGJvb2xlYW5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIHNldEluc3BlY3RNb2RlID0ge1xuICAgICAgICAgICAgLyoqIFNldCBhbiBpbnNwZWN0aW9uIG1vZGUuICovXG4gICAgICAgICAgICBtb2RlOiBJbnNwZWN0TW9kZVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEEgZGVzY3JpcHRvciBmb3IgdGhlIGhpZ2hsaWdodCBhcHBlYXJhbmNlIG9mIGhvdmVyZWQtb3ZlciBub2Rlcy4gTWF5IGJlIG9taXR0ZWQgaWYgPGNvZGU+ZW5hYmxlZCA9PSBmYWxzZTwvY29kZT4uXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaGlnaGxpZ2h0Q29uZmlnPzogSGlnaGxpZ2h0Q29uZmlnXG4gICAgICAgIH1cblxuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSBoaWdobGlnaHRSZWN0ID0ge1xuICAgICAgICAgICAgLyoqIFggY29vcmRpbmF0ZSAqL1xuICAgICAgICAgICAgeDogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKiBZIGNvb3JkaW5hdGUgKi9cbiAgICAgICAgICAgIHk6IG51bWJlclxuXG4gICAgICAgICAgICAvKiogUmVjdGFuZ2xlIHdpZHRoICovXG4gICAgICAgICAgICB3aWR0aDogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKiBSZWN0YW5nbGUgaGVpZ2h0ICovXG4gICAgICAgICAgICBoZWlnaHQ6IG51bWJlclxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBoaWdobGlnaHQgZmlsbCBjb2xvciAoZGVmYXVsdDogdHJhbnNwYXJlbnQpLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbG9yPzogRE9NLlJHQkFcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgaGlnaGxpZ2h0IG91dGxpbmUgY29sb3IgKGRlZmF1bHQ6IHRyYW5zcGFyZW50KS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBvdXRsaW5lQ29sb3I/OiBET00uUkdCQVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgaGlnaGxpZ2h0UXVhZCA9IHtcbiAgICAgICAgICAgIC8qKiBRdWFkIHRvIGhpZ2hsaWdodCAqL1xuICAgICAgICAgICAgcXVhZDogRE9NLlF1YWRcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgaGlnaGxpZ2h0IGZpbGwgY29sb3IgKGRlZmF1bHQ6IHRyYW5zcGFyZW50KS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb2xvcj86IERPTS5SR0JBXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGhpZ2hsaWdodCBvdXRsaW5lIGNvbG9yIChkZWZhdWx0OiB0cmFuc3BhcmVudCkuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgb3V0bGluZUNvbG9yPzogRE9NLlJHQkFcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIGhpZ2hsaWdodE5vZGUgPSB7XG4gICAgICAgICAgICAvKiogQSBkZXNjcmlwdG9yIGZvciB0aGUgaGlnaGxpZ2h0IGFwcGVhcmFuY2UuICovXG4gICAgICAgICAgICBoaWdobGlnaHRDb25maWc6IEhpZ2hsaWdodENvbmZpZ1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElkZW50aWZpZXIgb2YgdGhlIG5vZGUgdG8gaGlnaGxpZ2h0LlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG5vZGVJZD86IERPTS5Ob2RlSWRcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZGVudGlmaWVyIG9mIHRoZSBiYWNrZW5kIG5vZGUgdG8gaGlnaGxpZ2h0LlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGJhY2tlbmROb2RlSWQ/OiBET00uQmFja2VuZE5vZGVJZFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEphdmFTY3JpcHQgb2JqZWN0IGlkIG9mIHRoZSBub2RlIHRvIGJlIGhpZ2hsaWdodGVkLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9iamVjdElkPzogUnVudGltZS5SZW1vdGVPYmplY3RJZFxuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgaGlnaGxpZ2h0RnJhbWUgPSB7XG4gICAgICAgICAgICAvKiogSWRlbnRpZmllciBvZiB0aGUgZnJhbWUgdG8gaGlnaGxpZ2h0LiAqL1xuICAgICAgICAgICAgZnJhbWVJZDogUGFnZS5GcmFtZUlkXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGNvbnRlbnQgYm94IGhpZ2hsaWdodCBmaWxsIGNvbG9yIChkZWZhdWx0OiB0cmFuc3BhcmVudCkuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29udGVudENvbG9yPzogRE9NLlJHQkFcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgY29udGVudCBib3ggaGlnaGxpZ2h0IG91dGxpbmUgY29sb3IgKGRlZmF1bHQ6IHRyYW5zcGFyZW50KS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb250ZW50T3V0bGluZUNvbG9yPzogRE9NLlJHQkFcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIGdldEhpZ2hsaWdodE9iamVjdEZvclRlc3QgPSB7XG4gICAgICAgICAgICAvKiogSWQgb2YgdGhlIG5vZGUgdG8gZ2V0IGhpZ2hsaWdodCBvYmplY3QgZm9yLiAqL1xuICAgICAgICAgICAgbm9kZUlkOiBET00uTm9kZUlkXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICoqKiogQ29tbWFuZCBSZXN1bHQgKioqKlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICBleHBvcnQgbW9kdWxlIFJlc3VsdCB7XG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIGdldEhpZ2hsaWdodE9iamVjdEZvclRlc3QgPSB7XG4gICAgICAgICAgICAvKiogSGlnaGxpZ2h0IGRhdGEgZm9yIHRoZSBub2RlLiAqL1xuICAgICAgICAgICAgaGlnaGxpZ2h0OiBvYmplY3RcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAqKioqIEV2ZW50IFBhcmFtZXRlcnMgKioqKlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgIGV4cG9ydCBtb2R1bGUgRXZlbnRQYXJhbXMge1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiB0aGUgbm9kZSBzaG91bGQgYmUgaGlnaGxpZ2h0ZWQuIFRoaXMgaGFwcGVucyBhZnRlciBjYWxsIHRvIDxjb2RlPnNldEluc3BlY3RNb2RlPC9jb2RlPi5cbiAgICAgICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgbm9kZUhpZ2hsaWdodFJlcXVlc3RlZCA9IHtcbiAgICAgICAgICAgIC8qKiBObyBkZXNjcmlwdGlvbiAqL1xuICAgICAgICAgICAgbm9kZUlkOiBET00uTm9kZUlkXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiB0aGUgbm9kZSBzaG91bGQgYmUgaW5zcGVjdGVkLiBUaGlzIGhhcHBlbnMgYWZ0ZXIgY2FsbCB0byA8Y29kZT5zZXRJbnNwZWN0TW9kZTwvY29kZT4gb3Igd2hlbiB1c2VyIG1hbnVhbGx5IGluc3BlY3RzIGFuIGVsZW1lbnQuXG4gICAgICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCB0eXBlIGluc3BlY3ROb2RlUmVxdWVzdGVkID0ge1xuICAgICAgICAgICAgLyoqIElkIG9mIHRoZSBub2RlIHRvIGluc3BlY3QuICovXG4gICAgICAgICAgICBiYWNrZW5kTm9kZUlkOiBET00uQmFja2VuZE5vZGVJZFxuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgZG9tYWluIHByb3ZpZGVzIHZhcmlvdXMgZnVuY3Rpb25hbGl0eSByZWxhdGVkIHRvIGRyYXdpbmcgYXRvcCB0aGUgaW5zcGVjdGVkIHBhZ2UuXG4gKiBAZXhwZXJpbWVudGFsXG4gKi9cbmNsYXNzIE92ZXJsYXkge1xuICAgIHByaXZhdGUgZXZlbnRzID0gbmV3IEV2ZW50RW1pdHRlcigpXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGRiZzogYW55IC8qIEVsZWN0cm9uLkRlYnVnZ2VyKi8gKSB7XG5cbiAgICAgICAgdGhpcy5kYmcub24oJ21lc3NhZ2UnLCAoZXZlbnQ6IGFueSwgbWV0aG9kOiBhbnksIHBhcmFtczogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbZG9tYWluLCBkb21haW5NZXRob2RdID0gbWV0aG9kLnNwbGl0KCcuJylcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoZG9tYWluTWV0aG9kLCBwYXJhbXMpXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCF0aGlzLmRiZy5pc0F0dGFjaGVkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNyZWF0ZSBPdmVybGF5IERvbWFpbiBDbGFzcyBiZWNhdXNlIHRoZSBkZWJ1Z2dlciBpcyBub3QgYXR0YWNoZWQuYClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBvbihldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogRnVuY3Rpb24pIHtcbiAgICAgICAgdGhpcy5ldmVudHMub24oZXZlbnQsIGxpc3RlbmVyKVxuICAgIH1cblxuICAgIHB1YmxpYyBvbmNlKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbikge1xuICAgICAgICB0aGlzLmV2ZW50cy5vbihldmVudCwgbGlzdGVuZXIpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3NlcnRFcnJvcihlcnJvcjogYW55LCBjb21tYW5kTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICgnbWVzc2FnZScgaW4gZXJyb3IgJiYgJ2NvZGUnIGluIGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRGVidWdnZXJFcnJvcihlcnJvci5tZXNzYWdlLCBlcnJvci5jb2RlLCBjb21tYW5kTmFtZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBFbmFibGVzIGRvbWFpbiBub3RpZmljYXRpb25zLiAqL1xuICAgIHB1YmxpYyBhc3luYyBlbmFibGUoKTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnT3ZlcmxheS5lbmFibGUnLCB7fSwgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ092ZXJsYXkuZW5hYmxlJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIERpc2FibGVzIGRvbWFpbiBub3RpZmljYXRpb25zLiAqL1xuICAgIHB1YmxpYyBhc3luYyBkaXNhYmxlKCk6IFByb21pc2U8dW5kZWZpbmVkPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ092ZXJsYXkuZGlzYWJsZScsIHt9LCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnT3ZlcmxheS5kaXNhYmxlJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIFJlcXVlc3RzIHRoYXQgYmFja2VuZCBzaG93cyBwYWludCByZWN0YW5nbGVzICovXG4gICAgcHVibGljIGFzeW5jIHNldFNob3dQYWludFJlY3RzKHBhcmFtczogT3ZlcmxheS5QYXJhbXMuc2V0U2hvd1BhaW50UmVjdHMpOiBQcm9taXNlPHVuZGVmaW5lZD57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdPdmVybGF5LnNldFNob3dQYWludFJlY3RzJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnT3ZlcmxheS5zZXRTaG93UGFpbnRSZWN0cycpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKiBSZXF1ZXN0cyB0aGF0IGJhY2tlbmQgc2hvd3MgZGVidWcgYm9yZGVycyBvbiBsYXllcnMgKi9cbiAgICBwdWJsaWMgYXN5bmMgc2V0U2hvd0RlYnVnQm9yZGVycyhwYXJhbXM6IE92ZXJsYXkuUGFyYW1zLnNldFNob3dEZWJ1Z0JvcmRlcnMpOiBQcm9taXNlPHVuZGVmaW5lZD57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdPdmVybGF5LnNldFNob3dEZWJ1Z0JvcmRlcnMnLCBwYXJhbXMsIChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0RXJyb3IoZXJyb3IsICdPdmVybGF5LnNldFNob3dEZWJ1Z0JvcmRlcnMnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogUmVxdWVzdHMgdGhhdCBiYWNrZW5kIHNob3dzIHRoZSBGUFMgY291bnRlciAqL1xuICAgIHB1YmxpYyBhc3luYyBzZXRTaG93RlBTQ291bnRlcihwYXJhbXM6IE92ZXJsYXkuUGFyYW1zLnNldFNob3dGUFNDb3VudGVyKTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnT3ZlcmxheS5zZXRTaG93RlBTQ291bnRlcicsIHBhcmFtcywgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ092ZXJsYXkuc2V0U2hvd0ZQU0NvdW50ZXInKVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogUmVxdWVzdHMgdGhhdCBiYWNrZW5kIHNob3dzIHNjcm9sbCBib3R0bGVuZWNrIHJlY3RzICovXG4gICAgcHVibGljIGFzeW5jIHNldFNob3dTY3JvbGxCb3R0bGVuZWNrUmVjdHMocGFyYW1zOiBPdmVybGF5LlBhcmFtcy5zZXRTaG93U2Nyb2xsQm90dGxlbmVja1JlY3RzKTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnT3ZlcmxheS5zZXRTaG93U2Nyb2xsQm90dGxlbmVja1JlY3RzJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnT3ZlcmxheS5zZXRTaG93U2Nyb2xsQm90dGxlbmVja1JlY3RzJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIFBhaW50cyB2aWV3cG9ydCBzaXplIHVwb24gbWFpbiBmcmFtZSByZXNpemUuICovXG4gICAgcHVibGljIGFzeW5jIHNldFNob3dWaWV3cG9ydFNpemVPblJlc2l6ZShwYXJhbXM6IE92ZXJsYXkuUGFyYW1zLnNldFNob3dWaWV3cG9ydFNpemVPblJlc2l6ZSk6IFByb21pc2U8dW5kZWZpbmVkPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ092ZXJsYXkuc2V0U2hvd1ZpZXdwb3J0U2l6ZU9uUmVzaXplJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnT3ZlcmxheS5zZXRTaG93Vmlld3BvcnRTaXplT25SZXNpemUnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogTm8gZGVzY3JpcHRpb24gKi9cbiAgICBwdWJsaWMgYXN5bmMgc2V0UGF1c2VkSW5EZWJ1Z2dlck1lc3NhZ2UocGFyYW1zPzogT3ZlcmxheS5QYXJhbXMuc2V0UGF1c2VkSW5EZWJ1Z2dlck1lc3NhZ2UpOiBQcm9taXNlPHVuZGVmaW5lZD57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdPdmVybGF5LnNldFBhdXNlZEluRGVidWdnZXJNZXNzYWdlJywgcGFyYW1zIHx8IHt9LCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnT3ZlcmxheS5zZXRQYXVzZWRJbkRlYnVnZ2VyTWVzc2FnZScpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKiBObyBkZXNjcmlwdGlvbiAqL1xuICAgIHB1YmxpYyBhc3luYyBzZXRTdXNwZW5kZWQocGFyYW1zOiBPdmVybGF5LlBhcmFtcy5zZXRTdXNwZW5kZWQpOiBQcm9taXNlPHVuZGVmaW5lZD57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdPdmVybGF5LnNldFN1c3BlbmRlZCcsIHBhcmFtcywgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ092ZXJsYXkuc2V0U3VzcGVuZGVkJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIEVudGVycyB0aGUgJ2luc3BlY3QnIG1vZGUuIEluIHRoaXMgbW9kZSwgZWxlbWVudHMgdGhhdCB1c2VyIGlzIGhvdmVyaW5nIG92ZXIgYXJlIGhpZ2hsaWdodGVkLiBCYWNrZW5kIHRoZW4gZ2VuZXJhdGVzICdpbnNwZWN0Tm9kZVJlcXVlc3RlZCcgZXZlbnQgdXBvbiBlbGVtZW50IHNlbGVjdGlvbi4gKi9cbiAgICBwdWJsaWMgYXN5bmMgc2V0SW5zcGVjdE1vZGUocGFyYW1zOiBPdmVybGF5LlBhcmFtcy5zZXRJbnNwZWN0TW9kZSk6IFByb21pc2U8dW5kZWZpbmVkPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ092ZXJsYXkuc2V0SW5zcGVjdE1vZGUnLCBwYXJhbXMsIChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0RXJyb3IoZXJyb3IsICdPdmVybGF5LnNldEluc3BlY3RNb2RlJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIEhpZ2hsaWdodHMgZ2l2ZW4gcmVjdGFuZ2xlLiBDb29yZGluYXRlcyBhcmUgYWJzb2x1dGUgd2l0aCByZXNwZWN0IHRvIHRoZSBtYWluIGZyYW1lIHZpZXdwb3J0LiAqL1xuICAgIHB1YmxpYyBhc3luYyBoaWdobGlnaHRSZWN0KHBhcmFtczogT3ZlcmxheS5QYXJhbXMuaGlnaGxpZ2h0UmVjdCk6IFByb21pc2U8dW5kZWZpbmVkPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ092ZXJsYXkuaGlnaGxpZ2h0UmVjdCcsIHBhcmFtcywgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ092ZXJsYXkuaGlnaGxpZ2h0UmVjdCcpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKiBIaWdobGlnaHRzIGdpdmVuIHF1YWQuIENvb3JkaW5hdGVzIGFyZSBhYnNvbHV0ZSB3aXRoIHJlc3BlY3QgdG8gdGhlIG1haW4gZnJhbWUgdmlld3BvcnQuICovXG4gICAgcHVibGljIGFzeW5jIGhpZ2hsaWdodFF1YWQocGFyYW1zOiBPdmVybGF5LlBhcmFtcy5oaWdobGlnaHRRdWFkKTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnT3ZlcmxheS5oaWdobGlnaHRRdWFkJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnT3ZlcmxheS5oaWdobGlnaHRRdWFkJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIEhpZ2hsaWdodHMgRE9NIG5vZGUgd2l0aCBnaXZlbiBpZCBvciB3aXRoIHRoZSBnaXZlbiBKYXZhU2NyaXB0IG9iamVjdCB3cmFwcGVyLiBFaXRoZXIgbm9kZUlkIG9yIG9iamVjdElkIG11c3QgYmUgc3BlY2lmaWVkLiAqL1xuICAgIHB1YmxpYyBhc3luYyBoaWdobGlnaHROb2RlKHBhcmFtczogT3ZlcmxheS5QYXJhbXMuaGlnaGxpZ2h0Tm9kZSk6IFByb21pc2U8dW5kZWZpbmVkPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ092ZXJsYXkuaGlnaGxpZ2h0Tm9kZScsIHBhcmFtcywgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ092ZXJsYXkuaGlnaGxpZ2h0Tm9kZScpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKiBIaWdobGlnaHRzIG93bmVyIGVsZW1lbnQgb2YgdGhlIGZyYW1lIHdpdGggZ2l2ZW4gaWQuICovXG4gICAgcHVibGljIGFzeW5jIGhpZ2hsaWdodEZyYW1lKHBhcmFtczogT3ZlcmxheS5QYXJhbXMuaGlnaGxpZ2h0RnJhbWUpOiBQcm9taXNlPHVuZGVmaW5lZD57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdPdmVybGF5LmhpZ2hsaWdodEZyYW1lJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnT3ZlcmxheS5oaWdobGlnaHRGcmFtZScpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKiBIaWRlcyBhbnkgaGlnaGxpZ2h0LiAqL1xuICAgIHB1YmxpYyBhc3luYyBoaWRlSGlnaGxpZ2h0KCk6IFByb21pc2U8dW5kZWZpbmVkPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ092ZXJsYXkuaGlkZUhpZ2hsaWdodCcsIHt9LCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnT3ZlcmxheS5oaWRlSGlnaGxpZ2h0JylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIEZvciB0ZXN0aW5nLiAqL1xuICAgIHB1YmxpYyBhc3luYyBnZXRIaWdobGlnaHRPYmplY3RGb3JUZXN0KHBhcmFtczogT3ZlcmxheS5QYXJhbXMuZ2V0SGlnaGxpZ2h0T2JqZWN0Rm9yVGVzdCk6IFByb21pc2U8T3ZlcmxheS5SZXN1bHQuZ2V0SGlnaGxpZ2h0T2JqZWN0Rm9yVGVzdD57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTxPdmVybGF5LlJlc3VsdC5nZXRIaWdobGlnaHRPYmplY3RGb3JUZXN0PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnT3ZlcmxheS5nZXRIaWdobGlnaHRPYmplY3RGb3JUZXN0JywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnT3ZlcmxheS5nZXRIaWdobGlnaHRPYmplY3RGb3JUZXN0JylcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCBhcyBPdmVybGF5LlJlc3VsdC5nZXRIaWdobGlnaHRPYmplY3RGb3JUZXN0KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgT3ZlcmxheSJdfQ==