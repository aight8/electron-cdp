"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const EventEmitter = require("events");
const DebuggerError_1 = require("./DebuggerError");
/**
 * No description
 * @experimental
 */
class IndexedDB {
    constructor(dbg /* Electron.Debugger*/) {
        this.dbg = dbg; /* Electron.Debugger*/
        this.events = new EventEmitter();
        if (!this.dbg.isAttached()) {
            throw new Error(`Cannot create IndexedDB Domain Class because the debugger is not attached.`);
        }
    }
    on(event, listener) {
        this.events.on(event, listener);
    }
    once(event, listener) {
        this.events.on(event, listener);
    }
    assertError(error, commandName) {
        if ('message' in error && 'code' in error) {
            throw new DebuggerError_1.default(error.message, error.code, commandName);
        }
    }
    /** Enables events from backend. */
    async enable() {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('IndexedDB.enable', {}, (error, result) => {
                this.assertError(error, 'IndexedDB.enable');
                resolve();
            });
        });
    }
    /** Disables events from backend. */
    async disable() {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('IndexedDB.disable', {}, (error, result) => {
                this.assertError(error, 'IndexedDB.disable');
                resolve();
            });
        });
    }
    /** Requests database names for given security origin. */
    async requestDatabaseNames(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('IndexedDB.requestDatabaseNames', params, (error, result) => {
                this.assertError(error, 'IndexedDB.requestDatabaseNames');
                resolve(result);
            });
        });
    }
    /** Requests database with given name in given frame. */
    async requestDatabase(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('IndexedDB.requestDatabase', params, (error, result) => {
                this.assertError(error, 'IndexedDB.requestDatabase');
                resolve(result);
            });
        });
    }
    /** Requests data from object store or index. */
    async requestData(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('IndexedDB.requestData', params, (error, result) => {
                this.assertError(error, 'IndexedDB.requestData');
                resolve(result);
            });
        });
    }
    /** Clears all entries from an object store. */
    async clearObjectStore(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('IndexedDB.clearObjectStore', params, (error, result) => {
                this.assertError(error, 'IndexedDB.clearObjectStore');
                resolve(result);
            });
        });
    }
    /** Deletes a database. */
    async deleteDatabase(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('IndexedDB.deleteDatabase', params, (error, result) => {
                this.assertError(error, 'IndexedDB.deleteDatabase');
                resolve(result);
            });
        });
    }
}
exports.default = IndexedDB;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5kZXhlZERCLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vZ2VuZXJhdGVkLXRzL0luZGV4ZWREQi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUFzQztBQUN0QyxtREFBMkM7QUFrUTNDOzs7R0FHRztBQUNIO0lBR0ksWUFBNkIsR0FBUSxDQUFDLHNCQUFzQjtRQUEvQixRQUFHLEdBQUgsR0FBRyxDQUFLLENBQUMsc0JBQXNCO1FBRnBELFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFBO1FBSS9CLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDekIsTUFBTSxJQUFJLEtBQUssQ0FBQyw0RUFBNEUsQ0FBQyxDQUFBO1FBQ2pHLENBQUM7SUFDTCxDQUFDO0lBRU0sRUFBRSxDQUFDLEtBQWEsRUFBRSxRQUFrQjtRQUN2QyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVNLElBQUksQ0FBQyxLQUFhLEVBQUUsUUFBa0I7UUFDekMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFTyxXQUFXLENBQUMsS0FBVSxFQUFFLFdBQW1CO1FBQy9DLEVBQUUsQ0FBQyxDQUFDLFNBQVMsSUFBSSxLQUFLLElBQUksTUFBTSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDeEMsTUFBTSxJQUFJLHVCQUFhLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFBO1FBQ25FLENBQUM7SUFDTCxDQUFDO0lBRUQsbUNBQW1DO0lBQzVCLEtBQUssQ0FBQyxNQUFNO1FBQ2YsTUFBTSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQVksQ0FBQyxPQUFPLEVBQUUsTUFBTTtZ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LENBQUMsTUFBdUM7UUFDL0QsTUFBTSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQWtDLENBQUMsT0FBTyxFQUFFLE1BQU07WUFDdEUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsMEJBQTBCLEVBQUUsTUFBTSxFQUFFLENBQUMsS0FBVSxFQUFFLE1BQVc7Z0JBQzdFLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLDBCQUEwQixDQUFDLENBQUE7Z0JBQ25ELE9BQU8sQ0FBQyxNQUF5QyxDQUFDLENBQUE7WUFDdEQsQ0FBQyxDQUFDLENBQUE7UUFDTixDQUFDLENBQUMsQ0FBQTtJQUNOLENBQUM7Q0FFSjtBQUVELGtCQUFlLFNBQVMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEV2ZW50RW1pdHRlciBmcm9tICdldmVudHMnXG5pbXBvcnQgRGVidWdnZXJFcnJvciBmcm9tICcuL0RlYnVnZ2VyRXJyb3InXG5pbXBvcnQgUnVudGltZSBmcm9tICcuL1J1bnRpbWUnXG5cbm1vZHVsZSBJbmRleGVkREIge1xuICAgIC8qKioqKioqKioqKioqKipcbiAgICAgKioqKiBUeXBlcyAqKioqXG4gICAgICoqKioqKioqKioqKioqL1xuXG4gICAgLyoqXG4gICAgICogRGF0YWJhc2Ugd2l0aCBhbiBhcnJheSBvZiBvYmplY3Qgc3RvcmVzLlxuICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBEYXRhYmFzZVdpdGhPYmplY3RTdG9yZXMgPSB7XG4gICAgICAgIC8qKiBEYXRhYmFzZSBuYW1lLiAqL1xuICAgICAgICBuYW1lOiBzdHJpbmdcblxuICAgICAgICAvKiogRGF0YWJhc2UgdmVyc2lvbi4gKi9cbiAgICAgICAgdmVyc2lvbjogbnVtYmVyXG5cbiAgICAgICAgLyoqIE9iamVjdCBzdG9yZXMgaW4gdGhpcyBkYXRhYmFzZS4gKi9cbiAgICAgICAgb2JqZWN0U3RvcmVzOiBPYmplY3RTdG9yZVtdXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT2JqZWN0IHN0b3JlLlxuICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBPYmplY3RTdG9yZSA9IHtcbiAgICAgICAgLyoqIE9iamVjdCBzdG9yZSBuYW1lLiAqL1xuICAgICAgICBuYW1lOiBzdHJpbmdcblxuICAgICAgICAvKiogT2JqZWN0IHN0b3JlIGtleSBwYXRoLiAqL1xuICAgICAgICBrZXlQYXRoOiBLZXlQYXRoXG5cbiAgICAgICAgLyoqIElmIHRydWUsIG9iamVjdCBzdG9yZSBoYXMgYXV0byBpbmNyZW1lbnQgZmxhZyBzZXQuICovXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IGJvb2xlYW5cblxuICAgICAgICAvKiogSW5kZXhlcyBpbiB0aGlzIG9iamVjdCBzdG9yZS4gKi9cbiAgICAgICAgaW5kZXhlczogT2JqZWN0U3RvcmVJbmRleFtdXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT2JqZWN0IHN0b3JlIGluZGV4LlxuICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBPYmplY3RTdG9yZUluZGV4ID0ge1xuICAgICAgICAvKiogSW5kZXggbmFtZS4gKi9cbiAgICAgICAgbmFtZTogc3RyaW5nXG5cbiAgICAgICAgLyoqIEluZGV4IGtleSBwYXRoLiAqL1xuICAgICAgICBrZXlQYXRoOiBLZXlQYXRoXG5cbiAgICAgICAgLyoqIElmIHRydWUsIGluZGV4IGlzIHVuaXF1ZS4gKi9cbiAgICAgICAgdW5pcXVlOiBib29sZWFuXG5cbiAgICAgICAgLyoqIElmIHRydWUsIGluZGV4IGFsbG93cyBtdWx0aXBsZSBlbnRyaWVzIGZvciBhIGtleS4gKi9cbiAgICAgICAgbXVsdGlFbnRyeTogYm9vbGVhblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtleS5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgS2V5ID0ge1xuICAgICAgICAvKiogS2V5IHR5cGUuICovXG4gICAgICAgIHR5cGU6ICdudW1iZXInIHwgJ3N0cmluZycgfCAnZGF0ZScgfCAnYXJyYXknXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE51bWJlciB2YWx1ZS5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBudW1iZXI/OiBudW1iZXJcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RyaW5nIHZhbHVlLlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIHN0cmluZz86IHN0cmluZ1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEYXRlIHZhbHVlLlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIGRhdGU/OiBudW1iZXJcblxuICAgICAgICAvKipcbiAgICAgICAgICogQXJyYXkgdmFsdWUuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgYXJyYXk/OiBLZXlbXVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtleSByYW5nZS5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgS2V5UmFuZ2UgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb3dlciBib3VuZC5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBsb3dlcj86IEtleVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcHBlciBib3VuZC5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICB1cHBlcj86IEtleVxuXG4gICAgICAgIC8qKiBJZiB0cnVlIGxvd2VyIGJvdW5kIGlzIG9wZW4uICovXG4gICAgICAgIGxvd2VyT3BlbjogYm9vbGVhblxuXG4gICAgICAgIC8qKiBJZiB0cnVlIHVwcGVyIGJvdW5kIGlzIG9wZW4uICovXG4gICAgICAgIHVwcGVyT3BlbjogYm9vbGVhblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERhdGEgZW50cnkuXG4gICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAqL1xuICAgIGV4cG9ydCB0eXBlIERhdGFFbnRyeSA9IHtcbiAgICAgICAgLyoqIEtleSBvYmplY3QuICovXG4gICAgICAgIGtleTogUnVudGltZS5SZW1vdGVPYmplY3RcblxuICAgICAgICAvKiogUHJpbWFyeSBrZXkgb2JqZWN0LiAqL1xuICAgICAgICBwcmltYXJ5S2V5OiBSdW50aW1lLlJlbW90ZU9iamVjdFxuXG4gICAgICAgIC8qKiBWYWx1ZSBvYmplY3QuICovXG4gICAgICAgIHZhbHVlOiBSdW50aW1lLlJlbW90ZU9iamVjdFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtleSBwYXRoLlxuICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBLZXlQYXRoID0ge1xuICAgICAgICAvKiogS2V5IHBhdGggdHlwZS4gKi9cbiAgICAgICAgdHlwZTogJ251bGwnIHwgJ3N0cmluZycgfCAnYXJyYXknXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0cmluZyB2YWx1ZS5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBzdHJpbmc/OiBzdHJpbmdcblxuICAgICAgICAvKipcbiAgICAgICAgICogQXJyYXkgdmFsdWUuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgYXJyYXk/OiBzdHJpbmdbXVxuICAgIH1cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICoqKiogQ29tbWFuZCBQYXJhbWV0ZXJzICoqKipcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgIGV4cG9ydCBtb2R1bGUgUGFyYW1zIHtcbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgcmVxdWVzdERhdGFiYXNlTmFtZXMgPSB7XG4gICAgICAgICAgICAvKiogU2VjdXJpdHkgb3JpZ2luLiAqL1xuICAgICAgICAgICAgc2VjdXJpdHlPcmlnaW46IHN0cmluZ1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgcmVxdWVzdERhdGFiYXNlID0ge1xuICAgICAgICAgICAgLyoqIFNlY3VyaXR5IG9yaWdpbi4gKi9cbiAgICAgICAgICAgIHNlY3VyaXR5T3JpZ2luOiBzdHJpbmdcblxuICAgICAgICAgICAgLyoqIERhdGFiYXNlIG5hbWUuICovXG4gICAgICAgICAgICBkYXRhYmFzZU5hbWU6IHN0cmluZ1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgcmVxdWVzdERhdGEgPSB7XG4gICAgICAgICAgICAvKiogU2VjdXJpdHkgb3JpZ2luLiAqL1xuICAgICAgICAgICAgc2VjdXJpdHlPcmlnaW46IHN0cmluZ1xuXG4gICAgICAgICAgICAvKiogRGF0YWJhc2UgbmFtZS4gKi9cbiAgICAgICAgICAgIGRhdGFiYXNlTmFtZTogc3RyaW5nXG5cbiAgICAgICAgICAgIC8qKiBPYmplY3Qgc3RvcmUgbmFtZS4gKi9cbiAgICAgICAgICAgIG9iamVjdFN0b3JlTmFtZTogc3RyaW5nXG5cbiAgICAgICAgICAgIC8qKiBJbmRleCBuYW1lLCBlbXB0eSBzdHJpbmcgZm9yIG9iamVjdCBzdG9yZSBkYXRhIHJlcXVlc3RzLiAqL1xuICAgICAgICAgICAgaW5kZXhOYW1lOiBzdHJpbmdcblxuICAgICAgICAgICAgLyoqIE51bWJlciBvZiByZWNvcmRzIHRvIHNraXAuICovXG4gICAgICAgICAgICBza2lwQ291bnQ6IG51bWJlclxuXG4gICAgICAgICAgICAvKiogTnVtYmVyIG9mIHJlY29yZHMgdG8gZmV0Y2guICovXG4gICAgICAgICAgICBwYWdlU2l6ZTogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogS2V5IHJhbmdlLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGtleVJhbmdlPzogS2V5UmFuZ2VcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIGNsZWFyT2JqZWN0U3RvcmUgPSB7XG4gICAgICAgICAgICAvKiogU2VjdXJpdHkgb3JpZ2luLiAqL1xuICAgICAgICAgICAgc2VjdXJpdHlPcmlnaW46IHN0cmluZ1xuXG4gICAgICAgICAgICAvKiogRGF0YWJhc2UgbmFtZS4gKi9cbiAgICAgICAgICAgIGRhdGFiYXNlTmFtZTogc3RyaW5nXG5cbiAgICAgICAgICAgIC8qKiBPYmplY3Qgc3RvcmUgbmFtZS4gKi9cbiAgICAgICAgICAgIG9iamVjdFN0b3JlTmFtZTogc3RyaW5nXG4gICAgICAgIH1cblxuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSBkZWxldGVEYXRhYmFzZSA9IHtcbiAgICAgICAgICAgIC8qKiBTZWN1cml0eSBvcmlnaW4uICovXG4gICAgICAgICAgICBzZWN1cml0eU9yaWdpbjogc3RyaW5nXG5cbiAgICAgICAgICAgIC8qKiBEYXRhYmFzZSBuYW1lLiAqL1xuICAgICAgICAgICAgZGF0YWJhc2VOYW1lOiBzdHJpbmdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKiBDb21tYW5kIFJlc3VsdCAqKioqXG4gICAgICoqKioqKioqKioqKioqKioqKioqKioqL1xuICAgIGV4cG9ydCBtb2R1bGUgUmVzdWx0IHtcbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgcmVxdWVzdERhdGFiYXNlTmFtZXMgPSB7XG4gICAgICAgICAgICAvKiogRGF0YWJhc2UgbmFtZXMgZm9yIG9yaWdpbi4gKi9cbiAgICAgICAgICAgIGRhdGFiYXNlTmFtZXM6IHN0cmluZ1tdXG4gICAgICAgIH1cblxuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSByZXF1ZXN0RGF0YWJhc2UgPSB7XG4gICAgICAgICAgICAvKiogRGF0YWJhc2Ugd2l0aCBhbiBhcnJheSBvZiBvYmplY3Qgc3RvcmVzLiAqL1xuICAgICAgICAgICAgZGF0YWJhc2VXaXRoT2JqZWN0U3RvcmVzOiBEYXRhYmFzZVdpdGhPYmplY3RTdG9yZXNcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIHJlcXVlc3REYXRhID0ge1xuICAgICAgICAgICAgLyoqIEFycmF5IG9mIG9iamVjdCBzdG9yZSBkYXRhIGVudHJpZXMuICovXG4gICAgICAgICAgICBvYmplY3RTdG9yZURhdGFFbnRyaWVzOiBEYXRhRW50cnlbXVxuXG4gICAgICAgICAgICAvKiogSWYgdHJ1ZSwgdGhlcmUgYXJlIG1vcmUgZW50cmllcyB0byBmZXRjaCBpbiB0aGUgZ2l2ZW4gcmFuZ2UuICovXG4gICAgICAgICAgICBoYXNNb3JlOiBib29sZWFuXG4gICAgICAgIH1cblxuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSBjbGVhck9iamVjdFN0b3JlID0ge31cblxuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSBkZWxldGVEYXRhYmFzZSA9IHt9XG4gICAgfVxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICoqKiogRXZlbnQgUGFyYW1ldGVycyAqKioqXG4gICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbn1cblxuLyoqXG4gKiBObyBkZXNjcmlwdGlvblxuICogQGV4cGVyaW1lbnRhbFxuICovXG5jbGFzcyBJbmRleGVkREIge1xuICAgIHByaXZhdGUgZXZlbnRzID0gbmV3IEV2ZW50RW1pdHRlcigpXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGRiZzogYW55IC8qIEVsZWN0cm9uLkRlYnVnZ2VyKi8gKSB7XG5cbiAgICAgICAgaWYgKCF0aGlzLmRiZy5pc0F0dGFjaGVkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNyZWF0ZSBJbmRleGVkREIgRG9tYWluIENsYXNzIGJlY2F1c2UgdGhlIGRlYnVnZ2VyIGlzIG5vdCBhdHRhY2hlZC5gKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG9uKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbikge1xuICAgICAgICB0aGlzLmV2ZW50cy5vbihldmVudCwgbGlzdGVuZXIpXG4gICAgfVxuXG4gICAgcHVibGljIG9uY2UoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLm9uKGV2ZW50LCBsaXN0ZW5lcilcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzc2VydEVycm9yKGVycm9yOiBhbnksIGNvbW1hbmROYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKCdtZXNzYWdlJyBpbiBlcnJvciAmJiAnY29kZScgaW4gZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBEZWJ1Z2dlckVycm9yKGVycm9yLm1lc3NhZ2UsIGVycm9yLmNvZGUsIGNvbW1hbmROYW1lKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIEVuYWJsZXMgZXZlbnRzIGZyb20gYmFja2VuZC4gKi9cbiAgICBwdWJsaWMgYXN5bmMgZW5hYmxlKCk6IFByb21pc2U8dW5kZWZpbmVkPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ0luZGV4ZWREQi5lbmFibGUnLCB7fSwgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ0luZGV4ZWREQi5lbmFibGUnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogRGlzYWJsZXMgZXZlbnRzIGZyb20gYmFja2VuZC4gKi9cbiAgICBwdWJsaWMgYXN5bmMgZGlzYWJsZSgpOiBQcm9taXNlPHVuZGVmaW5lZD57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdJbmRleGVkREIuZGlzYWJsZScsIHt9LCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnSW5kZXhlZERCLmRpc2FibGUnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogUmVxdWVzdHMgZGF0YWJhc2UgbmFtZXMgZm9yIGdpdmVuIHNlY3VyaXR5IG9yaWdpbi4gKi9cbiAgICBwdWJsaWMgYXN5bmMgcmVxdWVzdERhdGFiYXNlTmFtZXMocGFyYW1zOiBJbmRleGVkREIuUGFyYW1zLnJlcXVlc3REYXRhYmFzZU5hbWVzKTogUHJvbWlzZTxJbmRleGVkREIuUmVzdWx0LnJlcXVlc3REYXRhYmFzZU5hbWVzPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPEluZGV4ZWREQi5SZXN1bHQucmVxdWVzdERhdGFiYXNlTmFtZXM+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdJbmRleGVkREIucmVxdWVzdERhdGFiYXNlTmFtZXMnLCBwYXJhbXMsIChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0RXJyb3IoZXJyb3IsICdJbmRleGVkREIucmVxdWVzdERhdGFiYXNlTmFtZXMnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0IGFzIEluZGV4ZWREQi5SZXN1bHQucmVxdWVzdERhdGFiYXNlTmFtZXMpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKiBSZXF1ZXN0cyBkYXRhYmFzZSB3aXRoIGdpdmVuIG5hbWUgaW4gZ2l2ZW4gZnJhbWUuICovXG4gICAgcHVibGljIGFzeW5jIHJlcXVlc3REYXRhYmFzZShwYXJhbXM6IEluZGV4ZWREQi5QYXJhbXMucmVxdWVzdERhdGFiYXNlKTogUHJvbWlzZTxJbmRleGVkREIuUmVzdWx0LnJlcXVlc3REYXRhYmFzZT57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTxJbmRleGVkREIuUmVzdWx0LnJlcXVlc3REYXRhYmFzZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ0luZGV4ZWREQi5yZXF1ZXN0RGF0YWJhc2UnLCBwYXJhbXMsIChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0RXJyb3IoZXJyb3IsICdJbmRleGVkREIucmVxdWVzdERhdGFiYXNlJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCBhcyBJbmRleGVkREIuUmVzdWx0LnJlcXVlc3REYXRhYmFzZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIFJlcXVlc3RzIGRhdGEgZnJvbSBvYmplY3Qgc3RvcmUgb3IgaW5kZXguICovXG4gICAgcHVibGljIGFzeW5jIHJlcXVlc3REYXRhKHBhcmFtczogSW5kZXhlZERCLlBhcmFtcy5yZXF1ZXN0RGF0YSk6IFByb21pc2U8SW5kZXhlZERCLlJlc3VsdC5yZXF1ZXN0RGF0YT57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTxJbmRleGVkREIuUmVzdWx0LnJlcXVlc3REYXRhPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnSW5kZXhlZERCLnJlcXVlc3REYXRhJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnSW5kZXhlZERCLnJlcXVlc3REYXRhJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCBhcyBJbmRleGVkREIuUmVzdWx0LnJlcXVlc3REYXRhKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogQ2xlYXJzIGFsbCBlbnRyaWVzIGZyb20gYW4gb2JqZWN0IHN0b3JlLiAqL1xuICAgIHB1YmxpYyBhc3luYyBjbGVhck9iamVjdFN0b3JlKHBhcmFtczogSW5kZXhlZERCLlBhcmFtcy5jbGVhck9iamVjdFN0b3JlKTogUHJvbWlzZTxJbmRleGVkREIuUmVzdWx0LmNsZWFyT2JqZWN0U3RvcmU+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8SW5kZXhlZERCLlJlc3VsdC5jbGVhck9iamVjdFN0b3JlPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnSW5kZXhlZERCLmNsZWFyT2JqZWN0U3RvcmUnLCBwYXJhbXMsIChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0RXJyb3IoZXJyb3IsICdJbmRleGVkREIuY2xlYXJPYmplY3RTdG9yZScpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQgYXMgSW5kZXhlZERCLlJlc3VsdC5jbGVhck9iamVjdFN0b3JlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogRGVsZXRlcyBhIGRhdGFiYXNlLiAqL1xuICAgIHB1YmxpYyBhc3luYyBkZWxldGVEYXRhYmFzZShwYXJhbXM6IEluZGV4ZWREQi5QYXJhbXMuZGVsZXRlRGF0YWJhc2UpOiBQcm9taXNlPEluZGV4ZWREQi5SZXN1bHQuZGVsZXRlRGF0YWJhc2U+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8SW5kZXhlZERCLlJlc3VsdC5kZWxldGVEYXRhYmFzZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ0luZGV4ZWREQi5kZWxldGVEYXRhYmFzZScsIHBhcmFtcywgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ0luZGV4ZWREQi5kZWxldGVEYXRhYmFzZScpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQgYXMgSW5kZXhlZERCLlJlc3VsdC5kZWxldGVEYXRhYmFzZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEluZGV4ZWREQiJdfQ==