"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const EventEmitter = require("events");
const DebuggerError_1 = require("./DebuggerError");
/**
 * This domain is deprecated - use Runtime or Log instead.
 */
class Console {
    constructor(dbg /* Electron.Debugger*/) {
        this.dbg = dbg; /* Electron.Debugger*/
        this.events = new EventEmitter();
        this.dbg.on('message', (event, method, params) => {
            const [domain, domainMethod] = method.split('.');
            this.events.emit(domainMethod, params);
        });
        if (!this.dbg.isAttached()) {
            throw new Error(`Cannot create Console Domain Class because the debugger is not attached.`);
        }
    }
    on(event, listener) {
        this.events.on(event, listener);
    }
    once(event, listener) {
        this.events.on(event, listener);
    }
    assertError(error, commandName) {
        if ('message' in error && 'code' in error) {
            throw new DebuggerError_1.default(error.message, error.code, commandName);
        }
    }
    /** Enables console domain, sends the messages collected so far to the client by means of the <code>messageAdded</code> notification. */
    async enable() {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Console.enable', {}, (error, result) => {
                this.assertError(error, 'Console.enable');
                resolve();
            });
        });
    }
    /** Disables console domain, prevents further console messages from being reported to the client. */
    async disable() {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Console.disable', {}, (error, result) => {
                this.assertError(error, 'Console.disable');
                resolve();
            });
        });
    }
    /** Does nothing. */
    async clearMessages() {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Console.clearMessages', {}, (error, result) => {
                this.assertError(error, 'Console.clearMessages');
                resolve();
            });
        });
    }
}
exports.default = Console;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29uc29sZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL2dlbmVyYXRlZC10cy9Db25zb2xlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsdUNBQXNDO0FBQ3RDLG1EQUEyQztBQXlFM0M7O0dBRUc7QUFDSDtJQUdJLFlBQTZCLEdBQVEsQ0FBQyxzQkFBc0I7UUFBL0IsUUFBRyxHQUFILEdBQUcsQ0FBSyxDQUFDLHNCQUFzQjtRQUZwRCxXQUFNLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQTtRQUkvQixJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxLQUFVLEVBQUUsTUFBVyxFQUFFLE1BQVc7WUFDeEQsTUFBTSxDQUFDLE1BQU0sRUFBRSxZQUFZLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1lBQ2hELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxNQUFNLENBQUMsQ0FBQTtRQUMxQyxDQUFDLENBQUMsQ0FBQTtRQUVGLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDekIsTUFBTSxJQUFJLEtBQUssQ0FBQywwRUFBMEUsQ0FBQyxDQUFBO1FBQy9GLENBQUM7SUFDTCxDQUFDO0lBRU0sRUFBRSxDQUFDLEtBQWEsRUFBRSxRQUFrQjtRQUN2QyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVNLElBQUksQ0FBQyxLQUFhLEVBQUUsUUFBa0I7UUFDekMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFTyxXQUFXLENBQUMsS0FBVSxFQUFFLFdBQW1CO1FBQy9DLEVBQUUsQ0FBQyxDQUFDLFNBQVMsSUFBSSxLQUFLLElBQUksTUFBTSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDeEMsTUFBTSxJQUFJLHVCQUFhLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFBO1FBQ25FLENBQUM7SUFDTCxDQUFDO0lBRUQsd0lBQXdJO0lBQ2pJLEtBQUssQ0FBQyxNQUFNO1FBQ2YsTUFBTSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQVksQ0FBQyxPQUFPLEVBQUUsTUFBTTtZQUNoRCxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLEVBQUUsQ0FBQyxLQUFVLEVBQUUsTUFBVztnQkFDL0QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQTtnQkFDekMsT0FBTyxFQUFFLENBQUE7WUFDYixDQUFDLENBQUMsQ0FBQTtRQUNOLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQztJQUVELG9HQUFvRztJQUM3RixLQUFLLENBQUMsT0FBTztRQUNoQixNQUFNLENBQUMsTUFBTSxJQUFJLE9BQU8sQ0FBWSxDQUFDLE9BQU8sRUFBRSxNQUFNO1lBQ2hELElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLGlCQUFpQixFQUFFLEVBQUUsRUFBRSxDQUFDLEtBQVUsRUFBRSxNQUFXO2dCQUNoRSxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxpQkFBaUIsQ0FBQyxDQUFBO2dCQUMxQyxPQUFPLEVBQUUsQ0FBQTtZQUNiLENBQUMsQ0FBQyxDQUFBO1FBQ04sQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBRUQsb0JBQW9CO0lBQ2IsS0FBSyxDQUFDLGFBQWE7UUFDdEIsTUFBTSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQVksQ0FBQyxPQUFPLEVBQUUsTUFBTTtZQUNoRCxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyx1QkFBdUIsRUFBRSxFQUFFLEVBQUUsQ0FBQyxLQUFVLEVBQUUsTUFBVztnQkFDdEUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsdUJBQXVCLENBQUMsQ0FBQTtnQkFDaEQsT0FBTyxFQUFFLENBQUE7WUFDYixDQUFDLENBQUMsQ0FBQTtRQUNOLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQztDQUVKO0FBRUQsa0JBQWUsT0FBTyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgRXZlbnRFbWl0dGVyIGZyb20gJ2V2ZW50cydcbmltcG9ydCBEZWJ1Z2dlckVycm9yIGZyb20gJy4vRGVidWdnZXJFcnJvcidcbmltcG9ydCBSdW50aW1lIGZyb20gJy4vUnVudGltZSdcblxuZGVjbGFyZSBpbnRlcmZhY2UgQ29uc29sZSB7XG5cbiAgICAvKiogSXNzdWVkIHdoZW4gbmV3IGNvbnNvbGUgbWVzc2FnZSBpcyBhZGRlZC4gKi9cbiAgICBvbihldmVudDogJ21lc3NhZ2VBZGRlZCcsIGxpc3RlbmVyOiAocGFyYW1zOiBDb25zb2xlLkV2ZW50UGFyYW1zLm1lc3NhZ2VBZGRlZCkgPT4gdm9pZCk6IHZvaWRcbiAgICAvKiogSXNzdWVkIHdoZW4gbmV3IGNvbnNvbGUgbWVzc2FnZSBpcyBhZGRlZC4gKi9cbiAgICBvbmNlKGV2ZW50OiAnbWVzc2FnZUFkZGVkJywgbGlzdGVuZXI6IChwYXJhbXM6IENvbnNvbGUuRXZlbnRQYXJhbXMubWVzc2FnZUFkZGVkKSA9PiB2b2lkKTogdm9pZFxuXG59XG5cbm1vZHVsZSBDb25zb2xlIHtcbiAgICAvKioqKioqKioqKioqKioqXG4gICAgICoqKiogVHlwZXMgKioqKlxuICAgICAqKioqKioqKioqKioqKi9cblxuICAgIC8qKlxuICAgICAqIENvbnNvbGUgbWVzc2FnZS5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgQ29uc29sZU1lc3NhZ2UgPSB7XG4gICAgICAgIC8qKiBNZXNzYWdlIHNvdXJjZS4gKi9cbiAgICAgICAgc291cmNlOiAneG1sJyB8ICdqYXZhc2NyaXB0JyB8ICduZXR3b3JrJyB8ICdjb25zb2xlLWFwaScgfCAnc3RvcmFnZScgfCAnYXBwY2FjaGUnIHwgJ3JlbmRlcmluZycgfCAnc2VjdXJpdHknIHwgJ290aGVyJyB8ICdkZXByZWNhdGlvbicgfCAnd29ya2VyJ1xuXG4gICAgICAgIC8qKiBNZXNzYWdlIHNldmVyaXR5LiAqL1xuICAgICAgICBsZXZlbDogJ2xvZycgfCAnd2FybmluZycgfCAnZXJyb3InIHwgJ2RlYnVnJyB8ICdpbmZvJ1xuXG4gICAgICAgIC8qKiBNZXNzYWdlIHRleHQuICovXG4gICAgICAgIHRleHQ6IHN0cmluZ1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVUkwgb2YgdGhlIG1lc3NhZ2Ugb3JpZ2luLlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIHVybD86IHN0cmluZ1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMaW5lIG51bWJlciBpbiB0aGUgcmVzb3VyY2UgdGhhdCBnZW5lcmF0ZWQgdGhpcyBtZXNzYWdlICgxLWJhc2VkKS5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBsaW5lPzogbnVtYmVyXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbHVtbiBudW1iZXIgaW4gdGhlIHJlc291cmNlIHRoYXQgZ2VuZXJhdGVkIHRoaXMgbWVzc2FnZSAoMS1iYXNlZCkuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgY29sdW1uPzogbnVtYmVyXG4gICAgfVxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKiBDb21tYW5kIFBhcmFtZXRlcnMgKioqKlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICoqKiogQ29tbWFuZCBSZXN1bHQgKioqKlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAqKioqIEV2ZW50IFBhcmFtZXRlcnMgKioqKlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgIGV4cG9ydCBtb2R1bGUgRXZlbnRQYXJhbXMge1xuICAgICAgICAvKipcbiAgICAgICAgICogSXNzdWVkIHdoZW4gbmV3IGNvbnNvbGUgbWVzc2FnZSBpcyBhZGRlZC5cbiAgICAgICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgbWVzc2FnZUFkZGVkID0ge1xuICAgICAgICAgICAgLyoqIENvbnNvbGUgbWVzc2FnZSB0aGF0IGhhcyBiZWVuIGFkZGVkLiAqL1xuICAgICAgICAgICAgbWVzc2FnZTogQ29uc29sZU1lc3NhZ2VcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGRvbWFpbiBpcyBkZXByZWNhdGVkIC0gdXNlIFJ1bnRpbWUgb3IgTG9nIGluc3RlYWQuXG4gKi9cbmNsYXNzIENvbnNvbGUge1xuICAgIHByaXZhdGUgZXZlbnRzID0gbmV3IEV2ZW50RW1pdHRlcigpXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGRiZzogYW55IC8qIEVsZWN0cm9uLkRlYnVnZ2VyKi8gKSB7XG5cbiAgICAgICAgdGhpcy5kYmcub24oJ21lc3NhZ2UnLCAoZXZlbnQ6IGFueSwgbWV0aG9kOiBhbnksIHBhcmFtczogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbZG9tYWluLCBkb21haW5NZXRob2RdID0gbWV0aG9kLnNwbGl0KCcuJylcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoZG9tYWluTWV0aG9kLCBwYXJhbXMpXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCF0aGlzLmRiZy5pc0F0dGFjaGVkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNyZWF0ZSBDb25zb2xlIERvbWFpbiBDbGFzcyBiZWNhdXNlIHRoZSBkZWJ1Z2dlciBpcyBub3QgYXR0YWNoZWQuYClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBvbihldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogRnVuY3Rpb24pIHtcbiAgICAgICAgdGhpcy5ldmVudHMub24oZXZlbnQsIGxpc3RlbmVyKVxuICAgIH1cblxuICAgIHB1YmxpYyBvbmNlKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbikge1xuICAgICAgICB0aGlzLmV2ZW50cy5vbihldmVudCwgbGlzdGVuZXIpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3NlcnRFcnJvcihlcnJvcjogYW55LCBjb21tYW5kTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICgnbWVzc2FnZScgaW4gZXJyb3IgJiYgJ2NvZGUnIGluIGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRGVidWdnZXJFcnJvcihlcnJvci5tZXNzYWdlLCBlcnJvci5jb2RlLCBjb21tYW5kTmFtZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBFbmFibGVzIGNvbnNvbGUgZG9tYWluLCBzZW5kcyB0aGUgbWVzc2FnZXMgY29sbGVjdGVkIHNvIGZhciB0byB0aGUgY2xpZW50IGJ5IG1lYW5zIG9mIHRoZSA8Y29kZT5tZXNzYWdlQWRkZWQ8L2NvZGU+IG5vdGlmaWNhdGlvbi4gKi9cbiAgICBwdWJsaWMgYXN5bmMgZW5hYmxlKCk6IFByb21pc2U8dW5kZWZpbmVkPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ0NvbnNvbGUuZW5hYmxlJywge30sIChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0RXJyb3IoZXJyb3IsICdDb25zb2xlLmVuYWJsZScpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKiBEaXNhYmxlcyBjb25zb2xlIGRvbWFpbiwgcHJldmVudHMgZnVydGhlciBjb25zb2xlIG1lc3NhZ2VzIGZyb20gYmVpbmcgcmVwb3J0ZWQgdG8gdGhlIGNsaWVudC4gKi9cbiAgICBwdWJsaWMgYXN5bmMgZGlzYWJsZSgpOiBQcm9taXNlPHVuZGVmaW5lZD57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdDb25zb2xlLmRpc2FibGUnLCB7fSwgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ0NvbnNvbGUuZGlzYWJsZScpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKiBEb2VzIG5vdGhpbmcuICovXG4gICAgcHVibGljIGFzeW5jIGNsZWFyTWVzc2FnZXMoKTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnQ29uc29sZS5jbGVhck1lc3NhZ2VzJywge30sIChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0RXJyb3IoZXJyb3IsICdDb25zb2xlLmNsZWFyTWVzc2FnZXMnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29uc29sZSJdfQ==