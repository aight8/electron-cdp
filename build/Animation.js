"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const EventEmitter = require("events");
const DebuggerError_1 = require("./DebuggerError");
/**
 * No description
 * @experimental
 */
class Animation {
    constructor(dbg /* Electron.Debugger*/) {
        this.dbg = dbg; /* Electron.Debugger*/
        this.events = new EventEmitter();
        this.dbg.on('message', (event, method, params) => {
            const [domain, domainMethod] = method.split('.');
            this.events.emit(domainMethod, params);
        });
        if (!this.dbg.isAttached()) {
            throw new Error(`Cannot create Animation Domain Class because the debugger is not attached.`);
        }
    }
    on(event, listener) {
        this.events.on(event, listener);
    }
    once(event, listener) {
        this.events.on(event, listener);
    }
    assertError(error, commandName) {
        if ('message' in error && 'code' in error) {
            throw new DebuggerError_1.default(error.message, error.code, commandName);
        }
    }
    /** Enables animation domain notifications. */
    async enable() {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Animation.enable', {}, (error, result) => {
                this.assertError(error, 'Animation.enable');
                resolve();
            });
        });
    }
    /** Disables animation domain notifications. */
    async disable() {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Animation.disable', {}, (error, result) => {
                this.assertError(error, 'Animation.disable');
                resolve();
            });
        });
    }
    /** Gets the playback rate of the document timeline. */
    async getPlaybackRate() {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Animation.getPlaybackRate', {}, (error, result) => {
                this.assertError(error, 'Animation.getPlaybackRate');
                resolve(result);
            });
        });
    }
    /** Sets the playback rate of the document timeline. */
    async setPlaybackRate(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Animation.setPlaybackRate', params, (error, result) => {
                this.assertError(error, 'Animation.setPlaybackRate');
                resolve();
            });
        });
    }
    /** Returns the current time of the an animation. */
    async getCurrentTime(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Animation.getCurrentTime', params, (error, result) => {
                this.assertError(error, 'Animation.getCurrentTime');
                resolve(result);
            });
        });
    }
    /** Sets the paused state of a set of animations. */
    async setPaused(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Animation.setPaused', params, (error, result) => {
                this.assertError(error, 'Animation.setPaused');
                resolve();
            });
        });
    }
    /** Sets the timing of an animation node. */
    async setTiming(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Animation.setTiming', params, (error, result) => {
                this.assertError(error, 'Animation.setTiming');
                resolve();
            });
        });
    }
    /** Seek a set of animations to a particular time within each animation. */
    async seekAnimations(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Animation.seekAnimations', params, (error, result) => {
                this.assertError(error, 'Animation.seekAnimations');
                resolve();
            });
        });
    }
    /** Releases a set of animations to no longer be manipulated. */
    async releaseAnimations(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Animation.releaseAnimations', params, (error, result) => {
                this.assertError(error, 'Animation.releaseAnimations');
                resolve();
            });
        });
    }
    /** Gets the remote object of the Animation. */
    async resolveAnimation(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Animation.resolveAnimation', params, (error, result) => {
                this.assertError(error, 'Animation.resolveAnimation');
                resolve(result);
            });
        });
    }
}
exports.default = Animation;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQW5pbWF0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vZ2VuZXJhdGVkLXRzL0FuaW1hdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUFzQztBQUN0QyxtREFBMkM7QUEyUDNDOzs7R0FHRztBQUNIO0lBR0ksWUFBNkIsR0FBUSxDQUFDLHNCQUFzQjtRQUEvQixRQUFHLEdBQUgsR0FBRyxDQUFLLENBQUMsc0JBQXNCO1FBRnBELFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFBO1FBSS9CLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLEtBQVUsRUFBRSxNQUFXLEVBQUUsTUFBVztZQUN4RCxNQUFNLENBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDaEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxDQUFBO1FBQzFDLENBQUMsQ0FBQyxDQUFBO1FBRUYsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN6QixNQUFNLElBQUksS0FBSyxDQUFDLDRFQUE0RSxDQUFDLENBQUE7UUFDakcsQ0FBQztJQUNMLENBQUM7SUFFTSxFQUFFLENBQUMsS0FBYSxFQUFFLFFBQWtCO1FBQ3ZDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQTtJQUNuQyxDQUFDO0lBRU0sSUFBSSxDQUFDLEtBQWEsRUFBRSxRQUFrQjtRQUN6QyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVPLFdBQVcsQ0FBQyxLQUFVLEVBQUUsV0FBbUI7UUFDL0MsRUFBRSxDQUFDLENBQUMsU0FBUyxJQUFJ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LENBQUMsNkJBQTZCLEVBQUUsTUFBTSxFQUFFLENBQUMsS0FBVSxFQUFFLE1BQVc7Z0JBQ2hGLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLDZCQUE2QixDQUFDLENBQUE7Z0JBQ3RELE9BQU8sRUFBRSxDQUFBO1lBQ2IsQ0FBQyxDQUFDLENBQUE7UUFDTixDQUFDLENBQUMsQ0FBQTtJQUNOLENBQUM7SUFFRCwrQ0FBK0M7SUFDeEMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLE1BQXlDO1FBQ25FLE1BQU0sQ0FBQyxNQUFNLElBQUksT0FBTyxDQUFvQyxDQUFDLE9BQU8sRUFBRSxNQUFNO1lBQ3hFLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLDRCQUE0QixFQUFFLE1BQU0sRUFBRSxDQUFDLEtBQVUsRUFBRSxNQUFXO2dCQUMvRSxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSw0QkFBNEIsQ0FBQyxDQUFBO2dCQUNyRCxPQUFPLENBQUMsTUFBMkMsQ0FBQyxDQUFBO1lBQ3hELENBQUMsQ0FBQyxDQUFBO1FBQ04sQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0NBRUo7QUFFRCxrQkFBZSxTQUFTLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBFdmVudEVtaXR0ZXIgZnJvbSAnZXZlbnRzJ1xuaW1wb3J0IERlYnVnZ2VyRXJyb3IgZnJvbSAnLi9EZWJ1Z2dlckVycm9yJ1xuaW1wb3J0IFJ1bnRpbWUgZnJvbSAnLi9SdW50aW1lJ1xuaW1wb3J0IERPTSBmcm9tICcuL0RPTSdcblxuZGVjbGFyZSBpbnRlcmZhY2UgQW5pbWF0aW9uIHtcblxuICAgIC8qKiBFdmVudCBmb3IgZWFjaCBhbmltYXRpb24gdGhhdCBoYXMgYmVlbiBjcmVhdGVkLiAqL1xuICAgIG9uKGV2ZW50OiAnYW5pbWF0aW9uQ3JlYXRlZCcsIGxpc3RlbmVyOiAocGFyYW1zOiBBbmltYXRpb24uRXZlbnRQYXJhbXMuYW5pbWF0aW9uQ3JlYXRlZCkgPT4gdm9pZCk6IHZvaWRcbiAgICAvKiogRXZlbnQgZm9yIGVhY2ggYW5pbWF0aW9uIHRoYXQgaGFzIGJlZW4gY3JlYXRlZC4gKi9cbiAgICBvbmNlKGV2ZW50OiAnYW5pbWF0aW9uQ3JlYXRlZCcsIGxpc3RlbmVyOiAocGFyYW1zOiBBbmltYXRpb24uRXZlbnRQYXJhbXMuYW5pbWF0aW9uQ3JlYXRlZCkgPT4gdm9pZCk6IHZvaWRcblxuICAgIC8qKiBFdmVudCBmb3IgYW5pbWF0aW9uIHRoYXQgaGFzIGJlZW4gc3RhcnRlZC4gKi9cbiAgICBvbihldmVudDogJ2FuaW1hdGlvblN0YXJ0ZWQnLCBsaXN0ZW5lcjogKHBhcmFtczogQW5pbWF0aW9uLkV2ZW50UGFyYW1zLmFuaW1hdGlvblN0YXJ0ZWQpID0+IHZvaWQpOiB2b2lkXG4gICAgLyoqIEV2ZW50IGZvciBhbmltYXRpb24gdGhhdCBoYXMgYmVlbiBzdGFydGVkLiAqL1xuICAgIG9uY2UoZXZlbnQ6ICdhbmltYXRpb25TdGFydGVkJywgbGlzdGVuZXI6IChwYXJhbXM6IEFuaW1hdGlvbi5FdmVudFBhcmFtcy5hbmltYXRpb25TdGFydGVkKSA9PiB2b2lkKTogdm9pZFxuXG4gICAgLyoqIEV2ZW50IGZvciB3aGVuIGFuIGFuaW1hdGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQuICovXG4gICAgb24oZXZlbnQ6ICdhbmltYXRpb25DYW5jZWxlZCcsIGxpc3RlbmVyOiAocGFyYW1zOiBBbmltYXRpb24uRXZlbnRQYXJhbXMuYW5pbWF0aW9uQ2FuY2VsZWQpID0+IHZvaWQpOiB2b2lkXG4gICAgLyoqIEV2ZW50IGZvciB3aGVuIGFuIGFuaW1hdGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQuICovXG4gICAgb25jZShldmVudDogJ2FuaW1hdGlvbkNhbmNlbGVkJywgbGlzdGVuZXI6IChwYXJhbXM6IEFuaW1hdGlvbi5FdmVudFBhcmFtcy5hbmltYXRpb25DYW5jZWxlZCkgPT4gdm9pZCk6IHZvaWRcblxufVxuXG5tb2R1bGUgQW5pbWF0aW9uIHtcbiAgICAvKioqKioqKioqKioqKioqXG4gICAgICoqKiogVHlwZXMgKioqKlxuICAgICAqKioqKioqKioqKioqKi9cblxuICAgIC8qKlxuICAgICAqIEFuaW1hdGlvbiBpbnN0YW5jZS5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgQW5pbWF0aW9uID0ge1xuICAgICAgICAvKiogPGNvZGU+QW5pbWF0aW9uPC9jb2RlPidzIGlkLiAqL1xuICAgICAgICBpZDogc3RyaW5nXG5cbiAgICAgICAgLyoqIDxjb2RlPkFuaW1hdGlvbjwvY29kZT4ncyBuYW1lLiAqL1xuICAgICAgICBuYW1lOiBzdHJpbmdcblxuICAgICAgICAvKipcbiAgICAgICAgICogPGNvZGU+QW5pbWF0aW9uPC9jb2RlPidzIGludGVybmFsIHBhdXNlZCBzdGF0ZS5cbiAgICAgICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAgICAgKi9cbiAgICAgICAgcGF1c2VkU3RhdGU6IGJvb2xlYW5cblxuICAgICAgICAvKiogPGNvZGU+QW5pbWF0aW9uPC9jb2RlPidzIHBsYXkgc3RhdGUuICovXG4gICAgICAgIHBsYXlTdGF0ZTogc3RyaW5nXG5cbiAgICAgICAgLyoqIDxjb2RlPkFuaW1hdGlvbjwvY29kZT4ncyBwbGF5YmFjayByYXRlLiAqL1xuICAgICAgICBwbGF5YmFja1JhdGU6IG51bWJlclxuXG4gICAgICAgIC8qKiA8Y29kZT5BbmltYXRpb248L2NvZGU+J3Mgc3RhcnQgdGltZS4gKi9cbiAgICAgICAgc3RhcnRUaW1lOiBudW1iZXJcblxuICAgICAgICAvKiogPGNvZGU+QW5pbWF0aW9uPC9jb2RlPidzIGN1cnJlbnQgdGltZS4gKi9cbiAgICAgICAgY3VycmVudFRpbWU6IG51bWJlclxuXG4gICAgICAgIC8qKiA8Y29kZT5BbmltYXRpb248L2NvZGU+J3Mgc291cmNlIGFuaW1hdGlvbiBub2RlLiAqL1xuICAgICAgICBzb3VyY2U6IEFuaW1hdGlvbkVmZmVjdFxuXG4gICAgICAgIC8qKiBBbmltYXRpb24gdHlwZSBvZiA8Y29kZT5BbmltYXRpb248L2NvZGU+LiAqL1xuICAgICAgICB0eXBlOiAnQ1NTVHJhbnNpdGlvbicgfCAnQ1NTQW5pbWF0aW9uJyB8ICdXZWJBbmltYXRpb24nXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdW5pcXVlIElEIGZvciA8Y29kZT5BbmltYXRpb248L2NvZGU+IHJlcHJlc2VudGluZyB0aGUgc291cmNlcyB0aGF0IHRyaWdnZXJlZCB0aGlzIENTUyBhbmltYXRpb24vdHJhbnNpdGlvbi5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBjc3NJZD86IHN0cmluZ1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFuaW1hdGlvbkVmZmVjdCBpbnN0YW5jZVxuICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBBbmltYXRpb25FZmZlY3QgPSB7XG4gICAgICAgIC8qKiA8Y29kZT5BbmltYXRpb25FZmZlY3Q8L2NvZGU+J3MgZGVsYXkuICovXG4gICAgICAgIGRlbGF5OiBudW1iZXJcblxuICAgICAgICAvKiogPGNvZGU+QW5pbWF0aW9uRWZmZWN0PC9jb2RlPidzIGVuZCBkZWxheS4gKi9cbiAgICAgICAgZW5kRGVsYXk6IG51bWJlclxuXG4gICAgICAgIC8qKiA8Y29kZT5BbmltYXRpb25FZmZlY3Q8L2NvZGU+J3MgaXRlcmF0aW9uIHN0YXJ0LiAqL1xuICAgICAgICBpdGVyYXRpb25TdGFydDogbnVtYmVyXG5cbiAgICAgICAgLyoqIDxjb2RlPkFuaW1hdGlvbkVmZmVjdDwvY29kZT4ncyBpdGVyYXRpb25zLiAqL1xuICAgICAgICBpdGVyYXRpb25zOiBudW1iZXJcblxuICAgICAgICAvKiogPGNvZGU+QW5pbWF0aW9uRWZmZWN0PC9jb2RlPidzIGl0ZXJhdGlvbiBkdXJhdGlvbi4gKi9cbiAgICAgICAgZHVyYXRpb246IG51bWJlclxuXG4gICAgICAgIC8qKiA8Y29kZT5BbmltYXRpb25FZmZlY3Q8L2NvZGU+J3MgcGxheWJhY2sgZGlyZWN0aW9uLiAqL1xuICAgICAgICBkaXJlY3Rpb246IHN0cmluZ1xuXG4gICAgICAgIC8qKiA8Y29kZT5BbmltYXRpb25FZmZlY3Q8L2NvZGU+J3MgZmlsbCBtb2RlLiAqL1xuICAgICAgICBmaWxsOiBzdHJpbmdcblxuICAgICAgICAvKiogPGNvZGU+QW5pbWF0aW9uRWZmZWN0PC9jb2RlPidzIHRhcmdldCBub2RlLiAqL1xuICAgICAgICBiYWNrZW5kTm9kZUlkOiBET00uQmFja2VuZE5vZGVJZFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8Y29kZT5BbmltYXRpb25FZmZlY3Q8L2NvZGU+J3Mga2V5ZnJhbWVzLlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIGtleWZyYW1lc1J1bGU/OiBLZXlmcmFtZXNSdWxlXG5cbiAgICAgICAgLyoqIDxjb2RlPkFuaW1hdGlvbkVmZmVjdDwvY29kZT4ncyB0aW1pbmcgZnVuY3Rpb24uICovXG4gICAgICAgIGVhc2luZzogc3RyaW5nXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2V5ZnJhbWVzIFJ1bGVcbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgS2V5ZnJhbWVzUnVsZSA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENTUyBrZXlmcmFtZWQgYW5pbWF0aW9uJ3MgbmFtZS5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBuYW1lPzogc3RyaW5nXG5cbiAgICAgICAgLyoqIExpc3Qgb2YgYW5pbWF0aW9uIGtleWZyYW1lcy4gKi9cbiAgICAgICAga2V5ZnJhbWVzOiBLZXlmcmFtZVN0eWxlW11cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBLZXlmcmFtZSBTdHlsZVxuICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBLZXlmcmFtZVN0eWxlID0ge1xuICAgICAgICAvKiogS2V5ZnJhbWUncyB0aW1lIG9mZnNldC4gKi9cbiAgICAgICAgb2Zmc2V0OiBzdHJpbmdcblxuICAgICAgICAvKiogPGNvZGU+QW5pbWF0aW9uRWZmZWN0PC9jb2RlPidzIHRpbWluZyBmdW5jdGlvbi4gKi9cbiAgICAgICAgZWFzaW5nOiBzdHJpbmdcbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAqKioqIENvbW1hbmQgUGFyYW1ldGVycyAqKioqXG4gICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICBleHBvcnQgbW9kdWxlIFBhcmFtcyB7XG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIHNldFBsYXliYWNrUmF0ZSA9IHtcbiAgICAgICAgICAgIC8qKiBQbGF5YmFjayByYXRlIGZvciBhbmltYXRpb25zIG9uIHBhZ2UgKi9cbiAgICAgICAgICAgIHBsYXliYWNrUmF0ZTogbnVtYmVyXG4gICAgICAgIH1cblxuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSBnZXRDdXJyZW50VGltZSA9IHtcbiAgICAgICAgICAgIC8qKiBJZCBvZiBhbmltYXRpb24uICovXG4gICAgICAgICAgICBpZDogc3RyaW5nXG4gICAgICAgIH1cblxuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSBzZXRQYXVzZWQgPSB7XG4gICAgICAgICAgICAvKiogQW5pbWF0aW9ucyB0byBzZXQgdGhlIHBhdXNlIHN0YXRlIG9mLiAqL1xuICAgICAgICAgICAgYW5pbWF0aW9uczogc3RyaW5nW11cblxuICAgICAgICAgICAgLyoqIFBhdXNlZCBzdGF0ZSB0byBzZXQgdG8uICovXG4gICAgICAgICAgICBwYXVzZWQ6IGJvb2xlYW5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIHNldFRpbWluZyA9IHtcbiAgICAgICAgICAgIC8qKiBBbmltYXRpb24gaWQuICovXG4gICAgICAgICAgICBhbmltYXRpb25JZDogc3RyaW5nXG5cbiAgICAgICAgICAgIC8qKiBEdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uLiAqL1xuICAgICAgICAgICAgZHVyYXRpb246IG51bWJlclxuXG4gICAgICAgICAgICAvKiogRGVsYXkgb2YgdGhlIGFuaW1hdGlvbi4gKi9cbiAgICAgICAgICAgIGRlbGF5OiBudW1iZXJcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIHNlZWtBbmltYXRpb25zID0ge1xuICAgICAgICAgICAgLyoqIExpc3Qgb2YgYW5pbWF0aW9uIGlkcyB0byBzZWVrLiAqL1xuICAgICAgICAgICAgYW5pbWF0aW9uczogc3RyaW5nW11cblxuICAgICAgICAgICAgLyoqIFNldCB0aGUgY3VycmVudCB0aW1lIG9mIGVhY2ggYW5pbWF0aW9uLiAqL1xuICAgICAgICAgICAgY3VycmVudFRpbWU6IG51bWJlclxuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgcmVsZWFzZUFuaW1hdGlvbnMgPSB7XG4gICAgICAgICAgICAvKiogTGlzdCBvZiBhbmltYXRpb24gaWRzIHRvIHNlZWsuICovXG4gICAgICAgICAgICBhbmltYXRpb25zOiBzdHJpbmdbXVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgcmVzb2x2ZUFuaW1hdGlvbiA9IHtcbiAgICAgICAgICAgIC8qKiBBbmltYXRpb24gaWQuICovXG4gICAgICAgICAgICBhbmltYXRpb25JZDogc3RyaW5nXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICoqKiogQ29tbWFuZCBSZXN1bHQgKioqKlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICBleHBvcnQgbW9kdWxlIFJlc3VsdCB7XG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIGdldFBsYXliYWNrUmF0ZSA9IHtcbiAgICAgICAgICAgIC8qKiBQbGF5YmFjayByYXRlIGZvciBhbmltYXRpb25zIG9uIHBhZ2UuICovXG4gICAgICAgICAgICBwbGF5YmFja1JhdGU6IG51bWJlclxuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgZ2V0Q3VycmVudFRpbWUgPSB7XG4gICAgICAgICAgICAvKiogQ3VycmVudCB0aW1lIG9mIHRoZSBwYWdlLiAqL1xuICAgICAgICAgICAgY3VycmVudFRpbWU6IG51bWJlclxuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgcmVzb2x2ZUFuaW1hdGlvbiA9IHtcbiAgICAgICAgICAgIC8qKiBDb3JyZXNwb25kaW5nIHJlbW90ZSBvYmplY3QuICovXG4gICAgICAgICAgICByZW1vdGVPYmplY3Q6IFJ1bnRpbWUuUmVtb3RlT2JqZWN0XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKiBFdmVudCBQYXJhbWV0ZXJzICoqKipcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICBleHBvcnQgbW9kdWxlIEV2ZW50UGFyYW1zIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGZvciBlYWNoIGFuaW1hdGlvbiB0aGF0IGhhcyBiZWVuIGNyZWF0ZWQuXG4gICAgICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCB0eXBlIGFuaW1hdGlvbkNyZWF0ZWQgPSB7XG4gICAgICAgICAgICAvKiogSWQgb2YgdGhlIGFuaW1hdGlvbiB0aGF0IHdhcyBjcmVhdGVkLiAqL1xuICAgICAgICAgICAgaWQ6IHN0cmluZ1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGZvciBhbmltYXRpb24gdGhhdCBoYXMgYmVlbiBzdGFydGVkLlxuICAgICAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICAgICAqL1xuICAgICAgICBleHBvcnQgdHlwZSBhbmltYXRpb25TdGFydGVkID0ge1xuICAgICAgICAgICAgLyoqIEFuaW1hdGlvbiB0aGF0IHdhcyBzdGFydGVkLiAqL1xuICAgICAgICAgICAgYW5pbWF0aW9uOiBBbmltYXRpb25cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBmb3Igd2hlbiBhbiBhbmltYXRpb24gaGFzIGJlZW4gY2FuY2VsbGVkLlxuICAgICAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICAgICAqL1xuICAgICAgICBleHBvcnQgdHlwZSBhbmltYXRpb25DYW5jZWxlZCA9IHtcbiAgICAgICAgICAgIC8qKiBJZCBvZiB0aGUgYW5pbWF0aW9uIHRoYXQgd2FzIGNhbmNlbGxlZC4gKi9cbiAgICAgICAgICAgIGlkOiBzdHJpbmdcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBObyBkZXNjcmlwdGlvblxuICogQGV4cGVyaW1lbnRhbFxuICovXG5jbGFzcyBBbmltYXRpb24ge1xuICAgIHByaXZhdGUgZXZlbnRzID0gbmV3IEV2ZW50RW1pdHRlcigpXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGRiZzogYW55IC8qIEVsZWN0cm9uLkRlYnVnZ2VyKi8gKSB7XG5cbiAgICAgICAgdGhpcy5kYmcub24oJ21lc3NhZ2UnLCAoZXZlbnQ6IGFueSwgbWV0aG9kOiBhbnksIHBhcmFtczogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbZG9tYWluLCBkb21haW5NZXRob2RdID0gbWV0aG9kLnNwbGl0KCcuJylcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoZG9tYWluTWV0aG9kLCBwYXJhbXMpXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCF0aGlzLmRiZy5pc0F0dGFjaGVkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNyZWF0ZSBBbmltYXRpb24gRG9tYWluIENsYXNzIGJlY2F1c2UgdGhlIGRlYnVnZ2VyIGlzIG5vdCBhdHRhY2hlZC5gKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG9uKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbikge1xuICAgICAgICB0aGlzLmV2ZW50cy5vbihldmVudCwgbGlzdGVuZXIpXG4gICAgfVxuXG4gICAgcHVibGljIG9uY2UoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLm9uKGV2ZW50LCBsaXN0ZW5lcilcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzc2VydEVycm9yKGVycm9yOiBhbnksIGNvbW1hbmROYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKCdtZXNzYWdlJyBpbiBlcnJvciAmJiAnY29kZScgaW4gZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBEZWJ1Z2dlckVycm9yKGVycm9yLm1lc3NhZ2UsIGVycm9yLmNvZGUsIGNvbW1hbmROYW1lKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIEVuYWJsZXMgYW5pbWF0aW9uIGRvbWFpbiBub3RpZmljYXRpb25zLiAqL1xuICAgIHB1YmxpYyBhc3luYyBlbmFibGUoKTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnQW5pbWF0aW9uLmVuYWJsZScsIHt9LCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnQW5pbWF0aW9uLmVuYWJsZScpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKiBEaXNhYmxlcyBhbmltYXRpb24gZG9tYWluIG5vdGlmaWNhdGlvbnMuICovXG4gICAgcHVibGljIGFzeW5jIGRpc2FibGUoKTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnQW5pbWF0aW9uLmRpc2FibGUnLCB7fSwgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ0FuaW1hdGlvbi5kaXNhYmxlJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIEdldHMgdGhlIHBsYXliYWNrIHJhdGUgb2YgdGhlIGRvY3VtZW50IHRpbWVsaW5lLiAqL1xuICAgIHB1YmxpYyBhc3luYyBnZXRQbGF5YmFja1JhdGUoKTogUHJvbWlzZTxBbmltYXRpb24uUmVzdWx0LmdldFBsYXliYWNrUmF0ZT57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTxBbmltYXRpb24uUmVzdWx0LmdldFBsYXliYWNrUmF0ZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ0FuaW1hdGlvbi5nZXRQbGF5YmFja1JhdGUnLCB7fSwgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ0FuaW1hdGlvbi5nZXRQbGF5YmFja1JhdGUnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0IGFzIEFuaW1hdGlvbi5SZXN1bHQuZ2V0UGxheWJhY2tSYXRlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogU2V0cyB0aGUgcGxheWJhY2sgcmF0ZSBvZiB0aGUgZG9jdW1lbnQgdGltZWxpbmUuICovXG4gICAgcHVibGljIGFzeW5jIHNldFBsYXliYWNrUmF0ZShwYXJhbXM6IEFuaW1hdGlvbi5QYXJhbXMuc2V0UGxheWJhY2tSYXRlKTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnQW5pbWF0aW9uLnNldFBsYXliYWNrUmF0ZScsIHBhcmFtcywgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ0FuaW1hdGlvbi5zZXRQbGF5YmFja1JhdGUnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogUmV0dXJucyB0aGUgY3VycmVudCB0aW1lIG9mIHRoZSBhbiBhbmltYXRpb24uICovXG4gICAgcHVibGljIGFzeW5jIGdldEN1cnJlbnRUaW1lKHBhcmFtczogQW5pbWF0aW9uLlBhcmFtcy5nZXRDdXJyZW50VGltZSk6IFByb21pc2U8QW5pbWF0aW9uLlJlc3VsdC5nZXRDdXJyZW50VGltZT57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTxBbmltYXRpb24uUmVzdWx0LmdldEN1cnJlbnRUaW1lPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnQW5pbWF0aW9uLmdldEN1cnJlbnRUaW1lJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnQW5pbWF0aW9uLmdldEN1cnJlbnRUaW1lJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCBhcyBBbmltYXRpb24uUmVzdWx0LmdldEN1cnJlbnRUaW1lKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogU2V0cyB0aGUgcGF1c2VkIHN0YXRlIG9mIGEgc2V0IG9mIGFuaW1hdGlvbnMuICovXG4gICAgcHVibGljIGFzeW5jIHNldFBhdXNlZChwYXJhbXM6IEFuaW1hdGlvbi5QYXJhbXMuc2V0UGF1c2VkKTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnQW5pbWF0aW9uLnNldFBhdXNlZCcsIHBhcmFtcywgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ0FuaW1hdGlvbi5zZXRQYXVzZWQnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogU2V0cyB0aGUgdGltaW5nIG9mIGFuIGFuaW1hdGlvbiBub2RlLiAqL1xuICAgIHB1YmxpYyBhc3luYyBzZXRUaW1pbmcocGFyYW1zOiBBbmltYXRpb24uUGFyYW1zLnNldFRpbWluZyk6IFByb21pc2U8dW5kZWZpbmVkPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ0FuaW1hdGlvbi5zZXRUaW1pbmcnLCBwYXJhbXMsIChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0RXJyb3IoZXJyb3IsICdBbmltYXRpb24uc2V0VGltaW5nJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIFNlZWsgYSBzZXQgb2YgYW5pbWF0aW9ucyB0byBhIHBhcnRpY3VsYXIgdGltZSB3aXRoaW4gZWFjaCBhbmltYXRpb24uICovXG4gICAgcHVibGljIGFzeW5jIHNlZWtBbmltYXRpb25zKHBhcmFtczogQW5pbWF0aW9uLlBhcmFtcy5zZWVrQW5pbWF0aW9ucyk6IFByb21pc2U8dW5kZWZpbmVkPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ0FuaW1hdGlvbi5zZWVrQW5pbWF0aW9ucycsIHBhcmFtcywgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ0FuaW1hdGlvbi5zZWVrQW5pbWF0aW9ucycpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKiBSZWxlYXNlcyBhIHNldCBvZiBhbmltYXRpb25zIHRvIG5vIGxvbmdlciBiZSBtYW5pcHVsYXRlZC4gKi9cbiAgICBwdWJsaWMgYXN5bmMgcmVsZWFzZUFuaW1hdGlvbnMocGFyYW1zOiBBbmltYXRpb24uUGFyYW1zLnJlbGVhc2VBbmltYXRpb25zKTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnQW5pbWF0aW9uLnJlbGVhc2VBbmltYXRpb25zJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnQW5pbWF0aW9uLnJlbGVhc2VBbmltYXRpb25zJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIEdldHMgdGhlIHJlbW90ZSBvYmplY3Qgb2YgdGhlIEFuaW1hdGlvbi4gKi9cbiAgICBwdWJsaWMgYXN5bmMgcmVzb2x2ZUFuaW1hdGlvbihwYXJhbXM6IEFuaW1hdGlvbi5QYXJhbXMucmVzb2x2ZUFuaW1hdGlvbik6IFByb21pc2U8QW5pbWF0aW9uLlJlc3VsdC5yZXNvbHZlQW5pbWF0aW9uPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPEFuaW1hdGlvbi5SZXN1bHQucmVzb2x2ZUFuaW1hdGlvbj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ0FuaW1hdGlvbi5yZXNvbHZlQW5pbWF0aW9uJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnQW5pbWF0aW9uLnJlc29sdmVBbmltYXRpb24nKVxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0IGFzIEFuaW1hdGlvbi5SZXN1bHQucmVzb2x2ZUFuaW1hdGlvbilcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEFuaW1hdGlvbiJdfQ==