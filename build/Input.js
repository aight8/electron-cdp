"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const EventEmitter = require("events");
const DebuggerError_1 = require("./DebuggerError");
/**
 * No description
 */
class Input {
    constructor(dbg /* Electron.Debugger*/) {
        this.dbg = dbg; /* Electron.Debugger*/
        this.events = new EventEmitter();
        this.dbg.on('message', (event, method, params) => {
            const [domain, domainMethod] = method.split('.');
            this.events.emit(domainMethod, params);
        });
        if (!this.dbg.isAttached()) {
            throw new Error(`Cannot create Input Domain Class because the debugger is not attached.`);
        }
    }
    on(event, listener) {
        this.events.on(event, listener);
    }
    once(event, listener) {
        this.events.on(event, listener);
    }
    assertError(error, commandName) {
        if ('message' in error && 'code' in error) {
            throw new DebuggerError_1.default(error.message, error.code, commandName);
        }
    }
    /** Dispatches a key event to the page. */
    async dispatchKeyEvent(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Input.dispatchKeyEvent', params, (error, result) => {
                this.assertError(error, 'Input.dispatchKeyEvent');
                resolve();
            });
        });
    }
    /** Dispatches a mouse event to the page. */
    async dispatchMouseEvent(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Input.dispatchMouseEvent', params, (error, result) => {
                this.assertError(error, 'Input.dispatchMouseEvent');
                resolve();
            });
        });
    }
    /**
     * Dispatches a touch event to the page.
     * @experimental
     */
    async dispatchTouchEvent(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Input.dispatchTouchEvent', params, (error, result) => {
                this.assertError(error, 'Input.dispatchTouchEvent');
                resolve();
            });
        });
    }
    /**
     * Emulates touch event from the mouse event parameters.
     * @experimental
     */
    async emulateTouchFromMouseEvent(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Input.emulateTouchFromMouseEvent', params, (error, result) => {
                this.assertError(error, 'Input.emulateTouchFromMouseEvent');
                resolve();
            });
        });
    }
    /**
     * Synthesizes a pinch gesture over a time period by issuing appropriate touch events.
     * @experimental
     */
    async synthesizePinchGesture(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Input.synthesizePinchGesture', params, (error, result) => {
                this.assertError(error, 'Input.synthesizePinchGesture');
                resolve();
            });
        });
    }
    /**
     * Synthesizes a scroll gesture over a time period by issuing appropriate touch events.
     * @experimental
     */
    async synthesizeScrollGesture(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Input.synthesizeScrollGesture', params, (error, result) => {
                this.assertError(error, 'Input.synthesizeScrollGesture');
                resolve();
            });
        });
    }
    /**
     * Synthesizes a tap gesture over a time period by issuing appropriate touch events.
     * @experimental
     */
    async synthesizeTapGesture(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('Input.synthesizeTapGesture', params, (error, result) => {
                this.assertError(error, 'Input.synthesizeTapGesture');
                resolve();
            });
        });
    }
}
exports.default = Input;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5wdXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9nZW5lcmF0ZWQtdHMvSW5wdXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx1Q0FBc0M7QUFDdEMsbURBQTJDO0FBNFczQzs7R0FFRztBQUNIO0lBR0ksWUFBNkIsR0FBUSxDQUFDLHNCQUFzQjtRQUEvQixRQUFHLEdBQUgsR0FBRyxDQUFLLENBQUMsc0JBQXNCO1FBRnBELFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFBO1FBSS9CLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLEtBQVUsRUFBRSxNQUFXLEVBQUUsTUFBVztZQUN4RCxNQUFNLENBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDaEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxDQUFBO1FBQzFDLENBQUMsQ0FBQyxDQUFBO1FBRUYsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN6QixNQUFNLElBQUksS0FBSyxDQUFDLHdFQUF3RSxDQUFDLENBQUE7UUFDN0YsQ0FBQztJQUNMLENBQUM7SUFFTSxFQUFFLENBQUMsS0FBYSxFQUFFLFFBQWtCO1FBQ3ZDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQTtJQUNuQyxDQUFDO0lBRU0sSUFBSSxDQUFDLEtBQWEsRUFBRSxRQUFrQjtRQUN6QyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVPLFdBQVcsQ0FBQyxLQUFVLEVBQUUsV0FBbUI7UUFDL0MsRUFBRSxDQUFDLENBQUMsU0FBUyxJQUFJLEtBQUssSUFB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QkFBK0IsRUFBRSxNQUFNLEVBQUUsQ0FBQyxLQUFVLEVBQUUsTUFBVztnQkFDbEYsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsK0JBQStCLENBQUMsQ0FBQTtnQkFDeEQsT0FBTyxFQUFFLENBQUE7WUFDYixDQUFDLENBQUMsQ0FBQTtRQUNOLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQztJQUVEOzs7T0FHRztJQUNJLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxNQUF5QztRQUN2RSxNQUFNLENBQUMsTUFBTSxJQUFJLE9BQU8sQ0FBWSxDQUFDLE9BQU8sRUFBRSxNQUFNO1lBQ2hELElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLDRCQUE0QixFQUFFLE1BQU0sRUFBRSxDQUFDLEtBQVUsRUFBRSxNQUFXO2dCQUMvRSxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSw0QkFBNEIsQ0FBQyxDQUFBO2dCQUNyRCxPQUFPLEVBQUUsQ0FBQTtZQUNiLENBQUMsQ0FBQyxDQUFBO1FBQ04sQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0NBRUo7QUFFRCxrQkFBZSxLQUFLLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBFdmVudEVtaXR0ZXIgZnJvbSAnZXZlbnRzJ1xuaW1wb3J0IERlYnVnZ2VyRXJyb3IgZnJvbSAnLi9EZWJ1Z2dlckVycm9yJ1xuXG5tb2R1bGUgSW5wdXQge1xuICAgIC8qKioqKioqKioqKioqKipcbiAgICAgKioqKiBUeXBlcyAqKioqXG4gICAgICoqKioqKioqKioqKioqL1xuXG4gICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICBleHBvcnQgdHlwZSBUb3VjaFBvaW50ID0ge1xuICAgICAgICAvKiogU3RhdGUgb2YgdGhlIHRvdWNoIHBvaW50LiAqL1xuICAgICAgICBzdGF0ZTogJ3RvdWNoUHJlc3NlZCcgfCAndG91Y2hSZWxlYXNlZCcgfCAndG91Y2hNb3ZlZCcgfCAndG91Y2hTdGF0aW9uYXJ5JyB8ICd0b3VjaENhbmNlbGxlZCdcblxuICAgICAgICAvKiogWCBjb29yZGluYXRlIG9mIHRoZSBldmVudCByZWxhdGl2ZSB0byB0aGUgbWFpbiBmcmFtZSdzIHZpZXdwb3J0LiAqL1xuICAgICAgICB4OiBudW1iZXJcblxuICAgICAgICAvKiogWSBjb29yZGluYXRlIG9mIHRoZSBldmVudCByZWxhdGl2ZSB0byB0aGUgbWFpbiBmcmFtZSdzIHZpZXdwb3J0LiAwIHJlZmVycyB0byB0aGUgdG9wIG9mIHRoZSB2aWV3cG9ydCBhbmQgWSBpbmNyZWFzZXMgYXMgaXQgcHJvY2VlZHMgdG93YXJkcyB0aGUgYm90dG9tIG9mIHRoZSB2aWV3cG9ydC4gKi9cbiAgICAgICAgeTogbnVtYmVyXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFggcmFkaXVzIG9mIHRoZSB0b3VjaCBhcmVhIChkZWZhdWx0OiAxKS5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICByYWRpdXNYPzogbnVtYmVyXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFkgcmFkaXVzIG9mIHRoZSB0b3VjaCBhcmVhIChkZWZhdWx0OiAxKS5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICByYWRpdXNZPzogbnVtYmVyXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJvdGF0aW9uIGFuZ2xlIChkZWZhdWx0OiAwLjApLlxuICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICovXG4gICAgICAgIHJvdGF0aW9uQW5nbGU/OiBudW1iZXJcblxuICAgICAgICAvKipcbiAgICAgICAgICogRm9yY2UgKGRlZmF1bHQ6IDEuMCkuXG4gICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgKi9cbiAgICAgICAgZm9yY2U/OiBudW1iZXJcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWRlbnRpZmllciB1c2VkIHRvIHRyYWNrIHRvdWNoIHNvdXJjZXMgYmV0d2VlbiBldmVudHMsIG11c3QgYmUgdW5pcXVlIHdpdGhpbiBhbiBldmVudC5cbiAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAqL1xuICAgICAgICBpZD86IG51bWJlclxuICAgIH1cblxuICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgZXhwb3J0IHR5cGUgR2VzdHVyZVNvdXJjZVR5cGUgPSAnZGVmYXVsdCcgfCAndG91Y2gnIHwgJ21vdXNlJ1xuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKiBDb21tYW5kIFBhcmFtZXRlcnMgKioqKlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgZXhwb3J0IG1vZHVsZSBQYXJhbXMge1xuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSBkaXNwYXRjaEtleUV2ZW50ID0ge1xuICAgICAgICAgICAgLyoqIFR5cGUgb2YgdGhlIGtleSBldmVudC4gKi9cbiAgICAgICAgICAgIHR5cGU6ICdrZXlEb3duJyB8ICdrZXlVcCcgfCAncmF3S2V5RG93bicgfCAnY2hhcidcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBCaXQgZmllbGQgcmVwcmVzZW50aW5nIHByZXNzZWQgbW9kaWZpZXIga2V5cy4gQWx0PTEsIEN0cmw9MiwgTWV0YS9Db21tYW5kPTQsIFNoaWZ0PTggKGRlZmF1bHQ6IDApLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG1vZGlmaWVycz86IG51bWJlclxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRpbWUgYXQgd2hpY2ggdGhlIGV2ZW50IG9jY3VycmVkLiBNZWFzdXJlZCBpbiBVVEMgdGltZSBpbiBzZWNvbmRzIHNpbmNlIEphbnVhcnkgMSwgMTk3MCAoZGVmYXVsdDogY3VycmVudCB0aW1lKS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aW1lc3RhbXA/OiBudW1iZXJcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUZXh0IGFzIGdlbmVyYXRlZCBieSBwcm9jZXNzaW5nIGEgdmlydHVhbCBrZXkgY29kZSB3aXRoIGEga2V5Ym9hcmQgbGF5b3V0LiBOb3QgbmVlZGVkIGZvciBmb3IgPGNvZGU+a2V5VXA8L2NvZGU+IGFuZCA8Y29kZT5yYXdLZXlEb3duPC9jb2RlPiBldmVudHMgKGRlZmF1bHQ6IFwiXCIpXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGV4dD86IHN0cmluZ1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRleHQgdGhhdCB3b3VsZCBoYXZlIGJlZW4gZ2VuZXJhdGVkIGJ5IHRoZSBrZXlib2FyZCBpZiBubyBtb2RpZmllcnMgd2VyZSBwcmVzc2VkIChleGNlcHQgZm9yIHNoaWZ0KS4gVXNlZnVsIGZvciBzaG9ydGN1dCAoYWNjZWxlcmF0b3IpIGtleSBoYW5kbGluZyAoZGVmYXVsdDogXCJcIikuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdW5tb2RpZmllZFRleHQ/OiBzdHJpbmdcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBVbmlxdWUga2V5IGlkZW50aWZpZXIgKGUuZy4sICdVKzAwNDEnKSAoZGVmYXVsdDogXCJcIikuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAga2V5SWRlbnRpZmllcj86IHN0cmluZ1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFVuaXF1ZSBET00gZGVmaW5lZCBzdHJpbmcgdmFsdWUgZm9yIGVhY2ggcGh5c2ljYWwga2V5IChlLmcuLCAnS2V5QScpIChkZWZhdWx0OiBcIlwiKS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb2RlPzogc3RyaW5nXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVW5pcXVlIERPTSBkZWZpbmVkIHN0cmluZyB2YWx1ZSBkZXNjcmliaW5nIHRoZSBtZWFuaW5nIG9mIHRoZSBrZXkgaW4gdGhlIGNvbnRleHQgb2YgYWN0aXZlIG1vZGlmaWVycywga2V5Ym9hcmQgbGF5b3V0LCBldGMgKGUuZy4sICdBbHRHcicpIChkZWZhdWx0OiBcIlwiKS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBrZXk/OiBzdHJpbmdcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBXaW5kb3dzIHZpcnR1YWwga2V5IGNvZGUgKGRlZmF1bHQ6IDApLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHdpbmRvd3NWaXJ0dWFsS2V5Q29kZT86IG51bWJlclxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIE5hdGl2ZSB2aXJ0dWFsIGtleSBjb2RlIChkZWZhdWx0OiAwKS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBuYXRpdmVWaXJ0dWFsS2V5Q29kZT86IG51bWJlclxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFdoZXRoZXIgdGhlIGV2ZW50IHdhcyBnZW5lcmF0ZWQgZnJvbSBhdXRvIHJlcGVhdCAoZGVmYXVsdDogZmFsc2UpLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGF1dG9SZXBlYXQ/OiBib29sZWFuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogV2hldGhlciB0aGUgZXZlbnQgd2FzIGdlbmVyYXRlZCBmcm9tIHRoZSBrZXlwYWQgKGRlZmF1bHQ6IGZhbHNlKS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpc0tleXBhZD86IGJvb2xlYW5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBXaGV0aGVyIHRoZSBldmVudCB3YXMgYSBzeXN0ZW0ga2V5IGV2ZW50IChkZWZhdWx0OiBmYWxzZSkuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaXNTeXN0ZW1LZXk/OiBib29sZWFuXG4gICAgICAgIH1cblxuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSBkaXNwYXRjaE1vdXNlRXZlbnQgPSB7XG4gICAgICAgICAgICAvKiogVHlwZSBvZiB0aGUgbW91c2UgZXZlbnQuICovXG4gICAgICAgICAgICB0eXBlOiAnbW91c2VQcmVzc2VkJyB8ICdtb3VzZVJlbGVhc2VkJyB8ICdtb3VzZU1vdmVkJ1xuXG4gICAgICAgICAgICAvKiogWCBjb29yZGluYXRlIG9mIHRoZSBldmVudCByZWxhdGl2ZSB0byB0aGUgbWFpbiBmcmFtZSdzIHZpZXdwb3J0LiAqL1xuICAgICAgICAgICAgeDogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKiBZIGNvb3JkaW5hdGUgb2YgdGhlIGV2ZW50IHJlbGF0aXZlIHRvIHRoZSBtYWluIGZyYW1lJ3Mgdmlld3BvcnQuIDAgcmVmZXJzIHRvIHRoZSB0b3Agb2YgdGhlIHZpZXdwb3J0IGFuZCBZIGluY3JlYXNlcyBhcyBpdCBwcm9jZWVkcyB0b3dhcmRzIHRoZSBib3R0b20gb2YgdGhlIHZpZXdwb3J0LiAqL1xuICAgICAgICAgICAgeTogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQml0IGZpZWxkIHJlcHJlc2VudGluZyBwcmVzc2VkIG1vZGlmaWVyIGtleXMuIEFsdD0xLCBDdHJsPTIsIE1ldGEvQ29tbWFuZD00LCBTaGlmdD04IChkZWZhdWx0OiAwKS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBtb2RpZmllcnM/OiBudW1iZXJcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaW1lIGF0IHdoaWNoIHRoZSBldmVudCBvY2N1cnJlZC4gTWVhc3VyZWQgaW4gVVRDIHRpbWUgaW4gc2Vjb25kcyBzaW5jZSBKYW51YXJ5IDEsIDE5NzAgKGRlZmF1bHQ6IGN1cnJlbnQgdGltZSkuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGltZXN0YW1wPzogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogTW91c2UgYnV0dG9uIChkZWZhdWx0OiBcIm5vbmVcIikuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgYnV0dG9uPzogJ25vbmUnIHwgJ2xlZnQnIHwgJ21pZGRsZScgfCAncmlnaHQnXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogTnVtYmVyIG9mIHRpbWVzIHRoZSBtb3VzZSBidXR0b24gd2FzIGNsaWNrZWQgKGRlZmF1bHQ6IDApLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNsaWNrQ291bnQ/OiBudW1iZXJcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIGRpc3BhdGNoVG91Y2hFdmVudCA9IHtcbiAgICAgICAgICAgIC8qKiBUeXBlIG9mIHRoZSB0b3VjaCBldmVudC4gKi9cbiAgICAgICAgICAgIHR5cGU6ICd0b3VjaFN0YXJ0JyB8ICd0b3VjaEVuZCcgfCAndG91Y2hNb3ZlJ1xuXG4gICAgICAgICAgICAvKiogVG91Y2ggcG9pbnRzLiAqL1xuICAgICAgICAgICAgdG91Y2hQb2ludHM6IFRvdWNoUG9pbnRbXVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEJpdCBmaWVsZCByZXByZXNlbnRpbmcgcHJlc3NlZCBtb2RpZmllciBrZXlzLiBBbHQ9MSwgQ3RybD0yLCBNZXRhL0NvbW1hbmQ9NCwgU2hpZnQ9OCAoZGVmYXVsdDogMCkuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbW9kaWZpZXJzPzogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGltZSBhdCB3aGljaCB0aGUgZXZlbnQgb2NjdXJyZWQuIE1lYXN1cmVkIGluIFVUQyB0aW1lIGluIHNlY29uZHMgc2luY2UgSmFudWFyeSAxLCAxOTcwIChkZWZhdWx0OiBjdXJyZW50IHRpbWUpLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRpbWVzdGFtcD86IG51bWJlclxuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBleHBlcmltZW50YWwgKi9cbiAgICAgICAgZXhwb3J0IHR5cGUgZW11bGF0ZVRvdWNoRnJvbU1vdXNlRXZlbnQgPSB7XG4gICAgICAgICAgICAvKiogVHlwZSBvZiB0aGUgbW91c2UgZXZlbnQuICovXG4gICAgICAgICAgICB0eXBlOiAnbW91c2VQcmVzc2VkJyB8ICdtb3VzZVJlbGVhc2VkJyB8ICdtb3VzZU1vdmVkJyB8ICdtb3VzZVdoZWVsJ1xuXG4gICAgICAgICAgICAvKiogWCBjb29yZGluYXRlIG9mIHRoZSBtb3VzZSBwb2ludGVyIGluIERJUC4gKi9cbiAgICAgICAgICAgIHg6IG51bWJlclxuXG4gICAgICAgICAgICAvKiogWSBjb29yZGluYXRlIG9mIHRoZSBtb3VzZSBwb2ludGVyIGluIERJUC4gKi9cbiAgICAgICAgICAgIHk6IG51bWJlclxuXG4gICAgICAgICAgICAvKiogVGltZSBhdCB3aGljaCB0aGUgZXZlbnQgb2NjdXJyZWQuIE1lYXN1cmVkIGluIFVUQyB0aW1lIGluIHNlY29uZHMgc2luY2UgSmFudWFyeSAxLCAxOTcwLiAqL1xuICAgICAgICAgICAgdGltZXN0YW1wOiBudW1iZXJcblxuICAgICAgICAgICAgLyoqIE1vdXNlIGJ1dHRvbi4gKi9cbiAgICAgICAgICAgIGJ1dHRvbjogJ25vbmUnIHwgJ2xlZnQnIHwgJ21pZGRsZScgfCAncmlnaHQnXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogWCBkZWx0YSBpbiBESVAgZm9yIG1vdXNlIHdoZWVsIGV2ZW50IChkZWZhdWx0OiAwKS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBkZWx0YVg/OiBudW1iZXJcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBZIGRlbHRhIGluIERJUCBmb3IgbW91c2Ugd2hlZWwgZXZlbnQgKGRlZmF1bHQ6IDApLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGRlbHRhWT86IG51bWJlclxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEJpdCBmaWVsZCByZXByZXNlbnRpbmcgcHJlc3NlZCBtb2RpZmllciBrZXlzLiBBbHQ9MSwgQ3RybD0yLCBNZXRhL0NvbW1hbmQ9NCwgU2hpZnQ9OCAoZGVmYXVsdDogMCkuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbW9kaWZpZXJzPzogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogTnVtYmVyIG9mIHRpbWVzIHRoZSBtb3VzZSBidXR0b24gd2FzIGNsaWNrZWQgKGRlZmF1bHQ6IDApLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNsaWNrQ291bnQ/OiBudW1iZXJcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIHN5bnRoZXNpemVQaW5jaEdlc3R1cmUgPSB7XG4gICAgICAgICAgICAvKiogWCBjb29yZGluYXRlIG9mIHRoZSBzdGFydCBvZiB0aGUgZ2VzdHVyZSBpbiBDU1MgcGl4ZWxzLiAqL1xuICAgICAgICAgICAgeDogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKiBZIGNvb3JkaW5hdGUgb2YgdGhlIHN0YXJ0IG9mIHRoZSBnZXN0dXJlIGluIENTUyBwaXhlbHMuICovXG4gICAgICAgICAgICB5OiBudW1iZXJcblxuICAgICAgICAgICAgLyoqIFJlbGF0aXZlIHNjYWxlIGZhY3RvciBhZnRlciB6b29taW5nICg+MS4wIHpvb21zIGluLCA8MS4wIHpvb21zIG91dCkuICovXG4gICAgICAgICAgICBzY2FsZUZhY3RvcjogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmVsYXRpdmUgcG9pbnRlciBzcGVlZCBpbiBwaXhlbHMgcGVyIHNlY29uZCAoZGVmYXVsdDogODAwKS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZWxhdGl2ZVNwZWVkPzogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogV2hpY2ggdHlwZSBvZiBpbnB1dCBldmVudHMgdG8gYmUgZ2VuZXJhdGVkIChkZWZhdWx0OiAnZGVmYXVsdCcsIHdoaWNoIHF1ZXJpZXMgdGhlIHBsYXRmb3JtIGZvciB0aGUgcHJlZmVycmVkIGlucHV0IHR5cGUpLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdlc3R1cmVTb3VyY2VUeXBlPzogR2VzdHVyZVNvdXJjZVR5cGVcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIHN5bnRoZXNpemVTY3JvbGxHZXN0dXJlID0ge1xuICAgICAgICAgICAgLyoqIFggY29vcmRpbmF0ZSBvZiB0aGUgc3RhcnQgb2YgdGhlIGdlc3R1cmUgaW4gQ1NTIHBpeGVscy4gKi9cbiAgICAgICAgICAgIHg6IG51bWJlclxuXG4gICAgICAgICAgICAvKiogWSBjb29yZGluYXRlIG9mIHRoZSBzdGFydCBvZiB0aGUgZ2VzdHVyZSBpbiBDU1MgcGl4ZWxzLiAqL1xuICAgICAgICAgICAgeTogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGRpc3RhbmNlIHRvIHNjcm9sbCBhbG9uZyB0aGUgWCBheGlzIChwb3NpdGl2ZSB0byBzY3JvbGwgbGVmdCkuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgeERpc3RhbmNlPzogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGRpc3RhbmNlIHRvIHNjcm9sbCBhbG9uZyB0aGUgWSBheGlzIChwb3NpdGl2ZSB0byBzY3JvbGwgdXApLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHlEaXN0YW5jZT86IG51bWJlclxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBudW1iZXIgb2YgYWRkaXRpb25hbCBwaXhlbHMgdG8gc2Nyb2xsIGJhY2sgYWxvbmcgdGhlIFggYXhpcywgaW4gYWRkaXRpb24gdG8gdGhlIGdpdmVuIGRpc3RhbmNlLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHhPdmVyc2Nyb2xsPzogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIG51bWJlciBvZiBhZGRpdGlvbmFsIHBpeGVscyB0byBzY3JvbGwgYmFjayBhbG9uZyB0aGUgWSBheGlzLCBpbiBhZGRpdGlvbiB0byB0aGUgZ2l2ZW4gZGlzdGFuY2UuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgeU92ZXJzY3JvbGw/OiBudW1iZXJcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcmV2ZW50IGZsaW5nIChkZWZhdWx0OiB0cnVlKS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBwcmV2ZW50Rmxpbmc/OiBib29sZWFuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU3dpcGUgc3BlZWQgaW4gcGl4ZWxzIHBlciBzZWNvbmQgKGRlZmF1bHQ6IDgwMCkuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc3BlZWQ/OiBudW1iZXJcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBXaGljaCB0eXBlIG9mIGlucHV0IGV2ZW50cyB0byBiZSBnZW5lcmF0ZWQgKGRlZmF1bHQ6ICdkZWZhdWx0Jywgd2hpY2ggcXVlcmllcyB0aGUgcGxhdGZvcm0gZm9yIHRoZSBwcmVmZXJyZWQgaW5wdXQgdHlwZSkuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2VzdHVyZVNvdXJjZVR5cGU/OiBHZXN0dXJlU291cmNlVHlwZVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBnZXN0dXJlIChkZWZhdWx0OiAwKS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZXBlYXRDb3VudD86IG51bWJlclxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGRlbGF5IGJldHdlZW4gZWFjaCByZXBlYXQuIChkZWZhdWx0OiAyNTApLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJlcGVhdERlbGF5TXM/OiBudW1iZXJcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGUgaW50ZXJhY3Rpb24gbWFya2VycyB0byBnZW5lcmF0ZSwgaWYgbm90IGVtcHR5IChkZWZhdWx0OiBcIlwiKS5cbiAgICAgICAgICAgICAqIEBvcHRpb25hbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpbnRlcmFjdGlvbk1hcmtlck5hbWU/OiBzdHJpbmdcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIHN5bnRoZXNpemVUYXBHZXN0dXJlID0ge1xuICAgICAgICAgICAgLyoqIFggY29vcmRpbmF0ZSBvZiB0aGUgc3RhcnQgb2YgdGhlIGdlc3R1cmUgaW4gQ1NTIHBpeGVscy4gKi9cbiAgICAgICAgICAgIHg6IG51bWJlclxuXG4gICAgICAgICAgICAvKiogWSBjb29yZGluYXRlIG9mIHRoZSBzdGFydCBvZiB0aGUgZ2VzdHVyZSBpbiBDU1MgcGl4ZWxzLiAqL1xuICAgICAgICAgICAgeTogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRHVyYXRpb24gYmV0d2VlbiB0b3VjaGRvd24gYW5kIHRvdWNodXAgZXZlbnRzIGluIG1zIChkZWZhdWx0OiA1MCkuXG4gICAgICAgICAgICAgKiBAb3B0aW9uYWxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZHVyYXRpb24/OiBudW1iZXJcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBOdW1iZXIgb2YgdGltZXMgdG8gcGVyZm9ybSB0aGUgdGFwIChlLmcuIDIgZm9yIGRvdWJsZSB0YXAsIGRlZmF1bHQ6IDEpLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRhcENvdW50PzogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogV2hpY2ggdHlwZSBvZiBpbnB1dCBldmVudHMgdG8gYmUgZ2VuZXJhdGVkIChkZWZhdWx0OiAnZGVmYXVsdCcsIHdoaWNoIHF1ZXJpZXMgdGhlIHBsYXRmb3JtIGZvciB0aGUgcHJlZmVycmVkIGlucHV0IHR5cGUpLlxuICAgICAgICAgICAgICogQG9wdGlvbmFsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdlc3R1cmVTb3VyY2VUeXBlPzogR2VzdHVyZVNvdXJjZVR5cGVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKiBDb21tYW5kIFJlc3VsdCAqKioqXG4gICAgICoqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICoqKiogRXZlbnQgUGFyYW1ldGVycyAqKioqXG4gICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbn1cblxuLyoqXG4gKiBObyBkZXNjcmlwdGlvblxuICovXG5jbGFzcyBJbnB1dCB7XG4gICAgcHJpdmF0ZSBldmVudHMgPSBuZXcgRXZlbnRFbWl0dGVyKClcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgZGJnOiBhbnkgLyogRWxlY3Ryb24uRGVidWdnZXIqLyApIHtcblxuICAgICAgICB0aGlzLmRiZy5vbignbWVzc2FnZScsIChldmVudDogYW55LCBtZXRob2Q6IGFueSwgcGFyYW1zOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtkb21haW4sIGRvbWFpbk1ldGhvZF0gPSBtZXRob2Quc3BsaXQoJy4nKVxuICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChkb21haW5NZXRob2QsIHBhcmFtcylcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAoIXRoaXMuZGJnLmlzQXR0YWNoZWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY3JlYXRlIElucHV0IERvbWFpbiBDbGFzcyBiZWNhdXNlIHRoZSBkZWJ1Z2dlciBpcyBub3QgYXR0YWNoZWQuYClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBvbihldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogRnVuY3Rpb24pIHtcbiAgICAgICAgdGhpcy5ldmVudHMub24oZXZlbnQsIGxpc3RlbmVyKVxuICAgIH1cblxuICAgIHB1YmxpYyBvbmNlKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbikge1xuICAgICAgICB0aGlzLmV2ZW50cy5vbihldmVudCwgbGlzdGVuZXIpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3NlcnRFcnJvcihlcnJvcjogYW55LCBjb21tYW5kTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICgnbWVzc2FnZScgaW4gZXJyb3IgJiYgJ2NvZGUnIGluIGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRGVidWdnZXJFcnJvcihlcnJvci5tZXNzYWdlLCBlcnJvci5jb2RlLCBjb21tYW5kTmFtZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBEaXNwYXRjaGVzIGEga2V5IGV2ZW50IHRvIHRoZSBwYWdlLiAqL1xuICAgIHB1YmxpYyBhc3luYyBkaXNwYXRjaEtleUV2ZW50KHBhcmFtczogSW5wdXQuUGFyYW1zLmRpc3BhdGNoS2V5RXZlbnQpOiBQcm9taXNlPHVuZGVmaW5lZD57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdJbnB1dC5kaXNwYXRjaEtleUV2ZW50JywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnSW5wdXQuZGlzcGF0Y2hLZXlFdmVudCcpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKiBEaXNwYXRjaGVzIGEgbW91c2UgZXZlbnQgdG8gdGhlIHBhZ2UuICovXG4gICAgcHVibGljIGFzeW5jIGRpc3BhdGNoTW91c2VFdmVudChwYXJhbXM6IElucHV0LlBhcmFtcy5kaXNwYXRjaE1vdXNlRXZlbnQpOiBQcm9taXNlPHVuZGVmaW5lZD57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdJbnB1dC5kaXNwYXRjaE1vdXNlRXZlbnQnLCBwYXJhbXMsIChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0RXJyb3IoZXJyb3IsICdJbnB1dC5kaXNwYXRjaE1vdXNlRXZlbnQnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwYXRjaGVzIGEgdG91Y2ggZXZlbnQgdG8gdGhlIHBhZ2UuXG4gICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBkaXNwYXRjaFRvdWNoRXZlbnQocGFyYW1zOiBJbnB1dC5QYXJhbXMuZGlzcGF0Y2hUb3VjaEV2ZW50KTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnSW5wdXQuZGlzcGF0Y2hUb3VjaEV2ZW50JywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnSW5wdXQuZGlzcGF0Y2hUb3VjaEV2ZW50JylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW11bGF0ZXMgdG91Y2ggZXZlbnQgZnJvbSB0aGUgbW91c2UgZXZlbnQgcGFyYW1ldGVycy5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIGVtdWxhdGVUb3VjaEZyb21Nb3VzZUV2ZW50KHBhcmFtczogSW5wdXQuUGFyYW1zLmVtdWxhdGVUb3VjaEZyb21Nb3VzZUV2ZW50KTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnSW5wdXQuZW11bGF0ZVRvdWNoRnJvbU1vdXNlRXZlbnQnLCBwYXJhbXMsIChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0RXJyb3IoZXJyb3IsICdJbnB1dC5lbXVsYXRlVG91Y2hGcm9tTW91c2VFdmVudCcpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN5bnRoZXNpemVzIGEgcGluY2ggZ2VzdHVyZSBvdmVyIGEgdGltZSBwZXJpb2QgYnkgaXNzdWluZyBhcHByb3ByaWF0ZSB0b3VjaCBldmVudHMuXG4gICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBzeW50aGVzaXplUGluY2hHZXN0dXJlKHBhcmFtczogSW5wdXQuUGFyYW1zLnN5bnRoZXNpemVQaW5jaEdlc3R1cmUpOiBQcm9taXNlPHVuZGVmaW5lZD57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdJbnB1dC5zeW50aGVzaXplUGluY2hHZXN0dXJlJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnSW5wdXQuc3ludGhlc2l6ZVBpbmNoR2VzdHVyZScpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN5bnRoZXNpemVzIGEgc2Nyb2xsIGdlc3R1cmUgb3ZlciBhIHRpbWUgcGVyaW9kIGJ5IGlzc3VpbmcgYXBwcm9wcmlhdGUgdG91Y2ggZXZlbnRzLlxuICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgKi9cbiAgICBwdWJsaWMgYXN5bmMgc3ludGhlc2l6ZVNjcm9sbEdlc3R1cmUocGFyYW1zOiBJbnB1dC5QYXJhbXMuc3ludGhlc2l6ZVNjcm9sbEdlc3R1cmUpOiBQcm9taXNlPHVuZGVmaW5lZD57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGJnLnNlbmRDb21tYW5kKCdJbnB1dC5zeW50aGVzaXplU2Nyb2xsR2VzdHVyZScsIHBhcmFtcywgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ0lucHV0LnN5bnRoZXNpemVTY3JvbGxHZXN0dXJlJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3ludGhlc2l6ZXMgYSB0YXAgZ2VzdHVyZSBvdmVyIGEgdGltZSBwZXJpb2QgYnkgaXNzdWluZyBhcHByb3ByaWF0ZSB0b3VjaCBldmVudHMuXG4gICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBzeW50aGVzaXplVGFwR2VzdHVyZShwYXJhbXM6IElucHV0LlBhcmFtcy5zeW50aGVzaXplVGFwR2VzdHVyZSk6IFByb21pc2U8dW5kZWZpbmVkPntcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ0lucHV0LnN5bnRoZXNpemVUYXBHZXN0dXJlJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnSW5wdXQuc3ludGhlc2l6ZVRhcEdlc3R1cmUnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW5wdXQiXX0=