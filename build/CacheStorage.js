"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const EventEmitter = require("events");
const DebuggerError_1 = require("./DebuggerError");
/**
 * No description
 * @experimental
 */
class CacheStorage {
    constructor(dbg /* Electron.Debugger*/) {
        this.dbg = dbg; /* Electron.Debugger*/
        this.events = new EventEmitter();
        if (!this.dbg.isAttached()) {
            throw new Error(`Cannot create CacheStorage Domain Class because the debugger is not attached.`);
        }
    }
    on(event, listener) {
        this.events.on(event, listener);
    }
    once(event, listener) {
        this.events.on(event, listener);
    }
    assertError(error, commandName) {
        if ('message' in error && 'code' in error) {
            throw new DebuggerError_1.default(error.message, error.code, commandName);
        }
    }
    /** Requests cache names. */
    async requestCacheNames(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('CacheStorage.requestCacheNames', params, (error, result) => {
                this.assertError(error, 'CacheStorage.requestCacheNames');
                resolve(result);
            });
        });
    }
    /** Requests data from cache. */
    async requestEntries(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('CacheStorage.requestEntries', params, (error, result) => {
                this.assertError(error, 'CacheStorage.requestEntries');
                resolve(result);
            });
        });
    }
    /** Deletes a cache. */
    async deleteCache(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('CacheStorage.deleteCache', params, (error, result) => {
                this.assertError(error, 'CacheStorage.deleteCache');
                resolve();
            });
        });
    }
    /** Deletes a cache entry. */
    async deleteEntry(params) {
        return await new Promise((resolve, reject) => {
            this.dbg.sendCommand('CacheStorage.deleteEntry', params, (error, result) => {
                this.assertError(error, 'CacheStorage.deleteEntry');
                resolve();
            });
        });
    }
}
exports.default = CacheStorage;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2FjaGVTdG9yYWdlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vZ2VuZXJhdGVkLXRzL0NhY2hlU3RvcmFnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUFzQztBQUN0QyxtREFBMkM7QUF3RzNDOzs7R0FHRztBQUNIO0lBR0ksWUFBNkIsR0FBUSxDQUFDLHNCQUFzQjtRQUEvQixRQUFHLEdBQUgsR0FBRyxDQUFLLENBQUMsc0JBQXNCO1FBRnBELFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFBO1FBSS9CLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDekIsTUFBTSxJQUFJLEtBQUssQ0FBQywrRUFBK0UsQ0FBQyxDQUFBO1FBQ3BHLENBQUM7SUFDTCxDQUFDO0lBRU0sRUFBRSxDQUFDLEtBQWEsRUFBRSxRQUFrQjtRQUN2QyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVNLElBQUksQ0FBQyxLQUFhLEVBQUUsUUFBa0I7UUFDekMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFTyxXQUFXLENBQUMsS0FBVSxFQUFFLFdBQW1CO1FBQy9DLEVBQUUsQ0FBQyxDQUFDLFNBQVMsSUFBSSxLQUFLLElBQUksTUFBTSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDeEMsTUFBTSxJQUFJLHVCQUFhLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFBO1FBQ25FLENBQUM7SUFDTCxDQUFDO0lBRUQsNEJBQTRCO0lBQ3JCLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxNQUE2QztRQUN4RSxNQUFNLENBQUMsTUFBTSxJQUFJLE9BQU8sQ0FBd0MsQ0FBQyxPQUFPLEVBQUUsTUFBTTtZQUM1RSxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxnQ0FBZ0MsRUFBRSxNQUFNLEVBQUUsQ0FBQyxLQUFVLEVBQUUsTUFBVztnQkFDbkYsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsZ0NBQWdDLENBQUMsQ0FBQTtnQkFDekQsT0FBTyxDQUFDLE1BQStDLENBQUMsQ0FBQTtZQUM1RCxDQUFDLENBQUMsQ0FBQTtRQUNOLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQztJQUVELGdDQUFnQztJQUN6QixLQUFLLENBQUMsY0FBYyxDQUFDLE1BQTBDO1FBQ2xFLE1BQU0sQ0FBQyxNQUFNLElBQUksT0FBTyxDQUFxQyxDQUFDLE9BQU8sRUFBRSxNQUFNO1lBQ3pFLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLDZCQUE2QixFQUFFLE1BQU0sRUFBRSxDQUFDLEtBQVUsRUFBRSxNQUFXO2dCQUNoRixJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSw2QkFBNkIsQ0FBQyxDQUFBO2dCQUN0RCxPQUFPLENBQUMsTUFBNEMsQ0FBQyxDQUFBO1lBQ3pELENBQUMsQ0FBQyxDQUFBO1FBQ04sQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBRUQsdUJBQXVCO0lBQ2hCLEtBQUssQ0FBQyxXQUFXLENBQUMsTUFBdUM7UUFDNUQsTUFBTSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQVksQ0FBQyxPQUFPLEVBQUUsTUFBTTtZQUNoRCxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQywwQkFBMEIsRUFBRSxNQUFNLEVBQUUsQ0FBQyxLQUFVLEVBQUUsTUFBVztnQkFDN0UsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsMEJBQTBCLENBQUMsQ0FBQTtnQkFDbkQsT0FBTyxFQUFFLENBQUE7WUFDYixDQUFDLENBQUMsQ0FBQTtRQUNOLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQztJQUVELDZCQUE2QjtJQUN0QixLQUFLLENBQUMsV0FBVyxDQUFDLE1BQXVDO1FBQzVELE1BQU0sQ0FBQyxNQUFNLElBQUksT0FBTyxDQUFZLENBQUMsT0FBTyxFQUFFLE1BQU07WUFDaEQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsMEJBQTBCLEVBQUUsTUFBTSxFQUFFLENBQUMsS0FBVSxFQUFFLE1BQVc7Z0JBQzdFLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLDBCQUEwQixDQUFDLENBQUE7Z0JBQ25ELE9BQU8sRUFBRSxDQUFBO1lBQ2IsQ0FBQyxDQUFDLENBQUE7UUFDTixDQUFDLENBQUMsQ0FBQTtJQUNOLENBQUM7Q0FFSjtBQUVELGtCQUFlLFlBQVksQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEV2ZW50RW1pdHRlciBmcm9tICdldmVudHMnXG5pbXBvcnQgRGVidWdnZXJFcnJvciBmcm9tICcuL0RlYnVnZ2VyRXJyb3InXG5cbm1vZHVsZSBDYWNoZVN0b3JhZ2Uge1xuICAgIC8qKioqKioqKioqKioqKipcbiAgICAgKioqKiBUeXBlcyAqKioqXG4gICAgICoqKioqKioqKioqKioqL1xuXG4gICAgLyoqXG4gICAgICogVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIENhY2hlIG9iamVjdC5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgQ2FjaGVJZCA9IHN0cmluZ1xuXG4gICAgLyoqXG4gICAgICogRGF0YSBlbnRyeS5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgRGF0YUVudHJ5ID0ge1xuICAgICAgICAvKiogUmVxdWVzdCB1cmwgc3BlYy4gKi9cbiAgICAgICAgcmVxdWVzdDogc3RyaW5nXG5cbiAgICAgICAgLyoqIFJlc3BvbnNlIHN0YXRhdXMgdGV4dC4gKi9cbiAgICAgICAgcmVzcG9uc2U6IHN0cmluZ1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhY2hlIGlkZW50aWZpZXIuXG4gICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAqL1xuICAgIGV4cG9ydCB0eXBlIENhY2hlID0ge1xuICAgICAgICAvKiogQW4gb3BhcXVlIHVuaXF1ZSBpZCBvZiB0aGUgY2FjaGUuICovXG4gICAgICAgIGNhY2hlSWQ6IENhY2hlSWRcblxuICAgICAgICAvKiogU2VjdXJpdHkgb3JpZ2luIG9mIHRoZSBjYWNoZS4gKi9cbiAgICAgICAgc2VjdXJpdHlPcmlnaW46IHN0cmluZ1xuXG4gICAgICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgY2FjaGUuICovXG4gICAgICAgIGNhY2hlTmFtZTogc3RyaW5nXG4gICAgfVxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKiBDb21tYW5kIFBhcmFtZXRlcnMgKioqKlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgZXhwb3J0IG1vZHVsZSBQYXJhbXMge1xuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSByZXF1ZXN0Q2FjaGVOYW1lcyA9IHtcbiAgICAgICAgICAgIC8qKiBTZWN1cml0eSBvcmlnaW4uICovXG4gICAgICAgICAgICBzZWN1cml0eU9yaWdpbjogc3RyaW5nXG4gICAgICAgIH1cblxuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSByZXF1ZXN0RW50cmllcyA9IHtcbiAgICAgICAgICAgIC8qKiBJRCBvZiBjYWNoZSB0byBnZXQgZW50cmllcyBmcm9tLiAqL1xuICAgICAgICAgICAgY2FjaGVJZDogQ2FjaGVJZFxuXG4gICAgICAgICAgICAvKiogTnVtYmVyIG9mIHJlY29yZHMgdG8gc2tpcC4gKi9cbiAgICAgICAgICAgIHNraXBDb3VudDogbnVtYmVyXG5cbiAgICAgICAgICAgIC8qKiBOdW1iZXIgb2YgcmVjb3JkcyB0byBmZXRjaC4gKi9cbiAgICAgICAgICAgIHBhZ2VTaXplOiBudW1iZXJcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIGRlbGV0ZUNhY2hlID0ge1xuICAgICAgICAgICAgLyoqIElkIG9mIGNhY2hlIGZvciBkZWxldGlvbi4gKi9cbiAgICAgICAgICAgIGNhY2hlSWQ6IENhY2hlSWRcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIGRlbGV0ZUVudHJ5ID0ge1xuICAgICAgICAgICAgLyoqIElkIG9mIGNhY2hlIHdoZXJlIHRoZSBlbnRyeSB3aWxsIGJlIGRlbGV0ZWQuICovXG4gICAgICAgICAgICBjYWNoZUlkOiBDYWNoZUlkXG5cbiAgICAgICAgICAgIC8qKiBVUkwgc3BlYyBvZiB0aGUgcmVxdWVzdC4gKi9cbiAgICAgICAgICAgIHJlcXVlc3Q6IHN0cmluZ1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAqKioqIENvbW1hbmQgUmVzdWx0ICoqKipcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgZXhwb3J0IG1vZHVsZSBSZXN1bHQge1xuICAgICAgICAvKiogQGV4cGVyaW1lbnRhbCAqL1xuICAgICAgICBleHBvcnQgdHlwZSByZXF1ZXN0Q2FjaGVOYW1lcyA9IHtcbiAgICAgICAgICAgIC8qKiBDYWNoZXMgZm9yIHRoZSBzZWN1cml0eSBvcmlnaW4uICovXG4gICAgICAgICAgICBjYWNoZXM6IENhY2hlW11cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgICAgIGV4cG9ydCB0eXBlIHJlcXVlc3RFbnRyaWVzID0ge1xuICAgICAgICAgICAgLyoqIEFycmF5IG9mIG9iamVjdCBzdG9yZSBkYXRhIGVudHJpZXMuICovXG4gICAgICAgICAgICBjYWNoZURhdGFFbnRyaWVzOiBEYXRhRW50cnlbXVxuXG4gICAgICAgICAgICAvKiogSWYgdHJ1ZSwgdGhlcmUgYXJlIG1vcmUgZW50cmllcyB0byBmZXRjaCBpbiB0aGUgZ2l2ZW4gcmFuZ2UuICovXG4gICAgICAgICAgICBoYXNNb3JlOiBib29sZWFuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKioqKiBFdmVudCBQYXJhbWV0ZXJzICoqKipcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxufVxuXG4vKipcbiAqIE5vIGRlc2NyaXB0aW9uXG4gKiBAZXhwZXJpbWVudGFsXG4gKi9cbmNsYXNzIENhY2hlU3RvcmFnZSB7XG4gICAgcHJpdmF0ZSBldmVudHMgPSBuZXcgRXZlbnRFbWl0dGVyKClcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgZGJnOiBhbnkgLyogRWxlY3Ryb24uRGVidWdnZXIqLyApIHtcblxuICAgICAgICBpZiAoIXRoaXMuZGJnLmlzQXR0YWNoZWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY3JlYXRlIENhY2hlU3RvcmFnZSBEb21haW4gQ2xhc3MgYmVjYXVzZSB0aGUgZGVidWdnZXIgaXMgbm90IGF0dGFjaGVkLmApXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLm9uKGV2ZW50LCBsaXN0ZW5lcilcbiAgICB9XG5cbiAgICBwdWJsaWMgb25jZShldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogRnVuY3Rpb24pIHtcbiAgICAgICAgdGhpcy5ldmVudHMub24oZXZlbnQsIGxpc3RlbmVyKVxuICAgIH1cblxuICAgIHByaXZhdGUgYXNzZXJ0RXJyb3IoZXJyb3I6IGFueSwgY29tbWFuZE5hbWU6IHN0cmluZykge1xuICAgICAgICBpZiAoJ21lc3NhZ2UnIGluIGVycm9yICYmICdjb2RlJyBpbiBlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IERlYnVnZ2VyRXJyb3IoZXJyb3IubWVzc2FnZSwgZXJyb3IuY29kZSwgY29tbWFuZE5hbWUpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogUmVxdWVzdHMgY2FjaGUgbmFtZXMuICovXG4gICAgcHVibGljIGFzeW5jIHJlcXVlc3RDYWNoZU5hbWVzKHBhcmFtczogQ2FjaGVTdG9yYWdlLlBhcmFtcy5yZXF1ZXN0Q2FjaGVOYW1lcyk6IFByb21pc2U8Q2FjaGVTdG9yYWdlLlJlc3VsdC5yZXF1ZXN0Q2FjaGVOYW1lcz57XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTxDYWNoZVN0b3JhZ2UuUmVzdWx0LnJlcXVlc3RDYWNoZU5hbWVzPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnQ2FjaGVTdG9yYWdlLnJlcXVlc3RDYWNoZU5hbWVzJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnQ2FjaGVTdG9yYWdlLnJlcXVlc3RDYWNoZU5hbWVzJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCBhcyBDYWNoZVN0b3JhZ2UuUmVzdWx0LnJlcXVlc3RDYWNoZU5hbWVzKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogUmVxdWVzdHMgZGF0YSBmcm9tIGNhY2hlLiAqL1xuICAgIHB1YmxpYyBhc3luYyByZXF1ZXN0RW50cmllcyhwYXJhbXM6IENhY2hlU3RvcmFnZS5QYXJhbXMucmVxdWVzdEVudHJpZXMpOiBQcm9taXNlPENhY2hlU3RvcmFnZS5SZXN1bHQucmVxdWVzdEVudHJpZXM+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8Q2FjaGVTdG9yYWdlLlJlc3VsdC5yZXF1ZXN0RW50cmllcz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYmcuc2VuZENvbW1hbmQoJ0NhY2hlU3RvcmFnZS5yZXF1ZXN0RW50cmllcycsIHBhcmFtcywgKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcnJvcihlcnJvciwgJ0NhY2hlU3RvcmFnZS5yZXF1ZXN0RW50cmllcycpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQgYXMgQ2FjaGVTdG9yYWdlLlJlc3VsdC5yZXF1ZXN0RW50cmllcylcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIERlbGV0ZXMgYSBjYWNoZS4gKi9cbiAgICBwdWJsaWMgYXN5bmMgZGVsZXRlQ2FjaGUocGFyYW1zOiBDYWNoZVN0b3JhZ2UuUGFyYW1zLmRlbGV0ZUNhY2hlKTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnQ2FjaGVTdG9yYWdlLmRlbGV0ZUNhY2hlJywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnQ2FjaGVTdG9yYWdlLmRlbGV0ZUNhY2hlJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIERlbGV0ZXMgYSBjYWNoZSBlbnRyeS4gKi9cbiAgICBwdWJsaWMgYXN5bmMgZGVsZXRlRW50cnkocGFyYW1zOiBDYWNoZVN0b3JhZ2UuUGFyYW1zLmRlbGV0ZUVudHJ5KTogUHJvbWlzZTx1bmRlZmluZWQ+e1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiZy5zZW5kQ29tbWFuZCgnQ2FjaGVTdG9yYWdlLmRlbGV0ZUVudHJ5JywgcGFyYW1zLCAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVycm9yKGVycm9yLCAnQ2FjaGVTdG9yYWdlLmRlbGV0ZUVudHJ5JylcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IENhY2hlU3RvcmFnZSJdfQ==